{"version":3,"file":"index.js","sources":["src/i18n/index.js"],"sourcesContent":["import path from 'path';\r\nimport fs from 'fs';\r\nimport util from 'util';\r\nimport { app, remote } from 'electron';\r\n\r\nconst eApp = app || remote.app;\r\n\r\nclass I18n {\r\n    /**\r\n     * Load users language if available, and fallback to english for any missing strings\r\n     * @constructor\r\n     */\r\n    constructor () {\r\n        let dir = path.join(__dirname, '../i18n/lang');\r\n        if (!fs.existsSync(dir)) {\r\n            dir = path.join(__dirname, 'i18n/lang');\r\n        }\r\n        const defaultLocale = path.join(dir, 'zh.i18n.json');\r\n        this.loadedLanguage = JSON.parse(fs.readFileSync(defaultLocale, 'utf8'));\r\n        const locale = path.join(dir, `${eApp.getLocale()}.i18n.json`);\r\n        if (fs.existsSync(locale)) {\r\n            const lang = JSON.parse(fs.readFileSync(locale, 'utf8'));\r\n            this.loadedLanguage = Object.assign(this.loadedLanguage, lang);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get translation string\r\n     * @param {string} phrase The key for the translation string\r\n     * @param {...string|number} replacements List of replacements in template strings\r\n     * @return {string} Translation in users language\r\n     */\r\n    __ (phrase, ...replacements) {\r\n        const translation = this.loadedLanguage[phrase] ? this.loadedLanguage[phrase] : phrase;\r\n        return util.format(translation, ...replacements);\r\n    }\r\n}\r\n\r\nexport default new I18n();\r\n"],"names":["app","remote"],"mappings":";;;;;;;;;AAKA,MAAM,IAAI,GAAGA,YAAG,IAAIC,eAAM,CAAC,GAAG,CAAC;;AAE/B,MAAM,IAAI,CAAC;;;;;IAKP,WAAW,CAAC,GAAG;QACX,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;QAC/C,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;YACrB,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;SAC3C;QACD,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;QACrD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC,CAAC;QACzE,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;QAC/D,IAAI,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;YACvB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC;YACzD,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;SAClE;KACJ;;;;;;;;IAQD,EAAE,CAAC,CAAC,MAAM,EAAE,GAAG,YAAY,EAAE;QACzB,MAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC;QACvF,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,GAAG,YAAY,CAAC,CAAC;KACpD;CACJ;;AAED,YAAe,IAAI,IAAI,EAAE,CAAC;;;;"}