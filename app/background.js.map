{"version":3,"file":"background.js","sources":["src/i18n/index.js","src/menu/dev_menu_template.js","src/menu/edit_menu_template.js","src/background/certificate.js","src/background/servers.js","src/background/windowState.js","src/background/autoUpdate.js","src/background.custom.js","src/env.js","src/background.js"],"sourcesContent":["import path from 'path';\r\nimport fs from 'fs';\r\nimport util from 'util';\r\nimport { app, remote } from 'electron';\r\n\r\nconst eApp = app || remote.app;\r\n\r\nclass I18n {\r\n    /**\r\n     * Load users language if available, and fallback to english for any missing strings\r\n     * @constructor\r\n     */\r\n    constructor () {\r\n        let dir = path.join(__dirname, '../i18n/lang');\r\n        if (!fs.existsSync(dir)) {\r\n            dir = path.join(__dirname, 'i18n/lang');\r\n        }\r\n        const defaultLocale = path.join(dir, 'zh.i18n.json');\r\n        this.loadedLanguage = JSON.parse(fs.readFileSync(defaultLocale, 'utf8'));\r\n        const locale = path.join(dir, `${eApp.getLocale()}.i18n.json`);\r\n        if (fs.existsSync(locale)) {\r\n            const lang = JSON.parse(fs.readFileSync(locale, 'utf8'));\r\n            this.loadedLanguage = Object.assign(this.loadedLanguage, lang);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get translation string\r\n     * @param {string} phrase The key for the translation string\r\n     * @param {...string|number} replacements List of replacements in template strings\r\n     * @return {string} Translation in users language\r\n     */\r\n    __ (phrase, ...replacements) {\r\n        const translation = this.loadedLanguage[phrase] ? this.loadedLanguage[phrase] : phrase;\r\n        return util.format(translation, ...replacements);\r\n    }\r\n}\r\n\r\nexport default new I18n();\r\n","import { app, BrowserWindow } from 'electron';\r\nimport i18n from '../i18n/index.js';\r\n\r\nexport const devMenuTemplate = {\r\n    label: i18n.__('Development'),\r\n    submenu: [{\r\n        label: 'Reload',\r\n        accelerator: 'CmdOrCtrl+R',\r\n        click: function () {\r\n            BrowserWindow.getFocusedWindow().webContents.reloadIgnoringCache();\r\n        }\r\n    }, {\r\n        label: i18n.__('Toggle_DevTools'),\r\n        accelerator: 'Alt+CmdOrCtrl+I',\r\n        click: function () {\r\n            BrowserWindow.getFocusedWindow().toggleDevTools();\r\n        }\r\n    }, {\r\n        label: i18n.__('Quit'),\r\n        accelerator: 'CmdOrCtrl+Q',\r\n        click: function () {\r\n            app.quit();\r\n        }\r\n    }]\r\n};\r\n","import i18n from '../i18n/index.js';\r\n\r\nexport const editMenuTemplate = {\r\n    label: i18n.__('Edit'),\r\n    submenu: [\r\n        { label: i18n.__('Undo'), accelerator: \"CmdOrCtrl+Z\", selector: \"undo:\" },\r\n        { label: i18n.__('Redo'), accelerator: \"Shift+CmdOrCtrl+Z\", selector: \"redo:\" },\r\n        { type: \"separator\" },\r\n        { label: i18n.__('Cut'), accelerator: \"CmdOrCtrl+X\", selector: \"cut:\" },\r\n        { label: i18n.__('Copy'), accelerator: \"CmdOrCtrl+C\", selector: \"copy:\" },\r\n        { label: i18n.__('Paste'), accelerator: \"CmdOrCtrl+V\", selector: \"paste:\" },\r\n        { label: i18n.__('Select_All'), accelerator: \"CmdOrCtrl+A\", selector: \"selectAll:\" }\r\n    ]\r\n};\r\n","import { app, dialog } from 'electron';\r\nimport jetpack from 'fs-jetpack';\r\nimport url from 'url';\r\nimport i18n from '../i18n/index.js';\r\n\r\nclass CertificateStore {\r\n    initWindow (win) {\r\n        this.storeFileName = 'certificate.json';\r\n        this.userDataDir = jetpack.cwd(app.getPath('userData'));\r\n\r\n        this.load();\r\n\r\n        // Don't ask twice for same cert if loading multiple urls\r\n        this.queued = {};\r\n\r\n        this.window = win;\r\n        app.on('certificate-error', (event, webContents, url, error, certificate, callback) => {\r\n            event.preventDefault();\r\n            if (this.isTrusted(url, certificate)) {\r\n                callback(true);\r\n                return;\r\n            }\r\n\r\n            if (this.queued[certificate.fingerprint]) {\r\n                this.queued[certificate.fingerprint].push(callback);\r\n                // Call the callback after approved/rejected\r\n                return;\r\n            } else {\r\n                this.queued[certificate.fingerprint] = [callback];\r\n            }\r\n\r\n            let detail = `URL: ${url}\\nError: ${error}`;\r\n            if (this.isExisting(url)) {\r\n                detail = i18n.__('Certificate_error_different', detail);\r\n            }\r\n\r\n            dialog.showMessageBox(this.window, {\r\n                title: i18n.__('Certificate_error'),\r\n                message: i18n.__('Certificate_error_message', certificate.issuerName),\r\n                detail: detail,\r\n                type: 'warning',\r\n                buttons: [\r\n                    i18n.__('Yes'),\r\n                    i18n.__('No')\r\n                ],\r\n                cancelId: 1\r\n            }, (response) => {\r\n                if (response === 0) {\r\n                    this.add(url, certificate);\r\n                    this.save();\r\n                    if (webContents.getURL().indexOf('file://') === 0) {\r\n                        webContents.send('certificate-reload', url);\r\n                    }\r\n                }\r\n                //Call all queued callbacks with result\r\n                this.queued[certificate.fingerprint].forEach(cb => cb(response === 0));\r\n                delete this.queued[certificate.fingerprint];\r\n            });\r\n        });\r\n    }\r\n\r\n    load () {\r\n        try {\r\n            this.data = this.userDataDir.read(this.storeFileName, 'json');\r\n        } catch (e) {\r\n            console.error(e);\r\n            this.data = {};\r\n        }\r\n\r\n        if (this.data === undefined) {\r\n            this.clear();\r\n        }\r\n    }\r\n\r\n    clear () {\r\n        this.data = {};\r\n        this.save();\r\n    }\r\n\r\n    save () {\r\n        this.userDataDir.write(this.storeFileName, this.data, { atomic: true });\r\n    }\r\n\r\n    parseCertificate (certificate) {\r\n        return certificate.issuerName + '\\n' + certificate.data.toString();\r\n    }\r\n\r\n    getHost (certUrl) {\r\n        return url.parse(certUrl).host;\r\n    }\r\n\r\n    add (certUrl, certificate) {\r\n        const host = this.getHost(certUrl);\r\n        this.data[host] = this.parseCertificate(certificate);\r\n    }\r\n\r\n    isExisting (certUrl) {\r\n        const host = this.getHost(certUrl);\r\n        return this.data.hasOwnProperty(host);\r\n    }\r\n\r\n    isTrusted (certUrl, certificate) {\r\n        const host = this.getHost(certUrl);\r\n        if (!this.isExisting(certUrl)) {\r\n            return false;\r\n        }\r\n        return this.data[host] === this.parseCertificate(certificate);\r\n    }\r\n}\r\n\r\nconst certificateStore = new CertificateStore();\r\n\r\nexport default certificateStore;\r\n","import { app } from 'electron';\r\n\r\nlet servers = {};\r\n\r\nexport default {\r\n    loadServers (s) {\r\n        servers = s;\r\n    },\r\n\r\n    getServers () {\r\n        return servers;\r\n    }\r\n};\r\n\r\napp.on('login', function (event, webContents, request, authInfo, callback) {\r\n    for (const url of Object.keys(servers)) {\r\n        const server = servers[url];\r\n        if (request.url.indexOf(url) === 0 && server.username) {\r\n            callback(server.username, server.password);\r\n            break;\r\n        }\r\n    }\r\n});\r\n","// Simple module to help you remember the size and position of windows.\r\n// Can be used for more than one window, just construct many\r\n// instances of it and give each different name.\r\n\r\nimport { app } from 'electron';\r\nimport jetpack from 'fs-jetpack';\r\nimport _ from 'lodash';\r\n\r\nexport default function (name, defaults) {\r\n\r\n    const userDataDir = jetpack.cwd(app.getPath('userData'));\r\n    const stateStoreFile = `window-state-${name}.json`;\r\n    let state = {\r\n        width: defaults.width,\r\n        height: defaults.height\r\n    };\r\n\r\n    try {\r\n        const loadedState = userDataDir.read(stateStoreFile, 'json');\r\n        if (loadedState) {\r\n            state = loadedState;\r\n        }\r\n    } catch (err) {\r\n        // For some reason json can't be read.\r\n        // No worries, we have defaults.\r\n    }\r\n\r\n    const saveState = function (win) {\r\n        if (!win.isMaximized() && !win.isMinimized() && win.isVisible()) {\r\n            const position = win.getPosition();\r\n            const size = win.getSize();\r\n            state.x = position[0];\r\n            state.y = position[1];\r\n            state.width = size[0];\r\n            state.height = size[1];\r\n        }\r\n        state.isMaximized = win.isMaximized();\r\n        state.isMinimized = win.isMinimized();\r\n        state.isHidden = !win.isMinimized() && !win.isVisible();\r\n        userDataDir.write(stateStoreFile, state, { atomic: true });\r\n    };\r\n\r\n    return {\r\n        get x () { return state.x && Math.floor(state.x); },\r\n        get y () { return state.y && Math.floor(state.y); },\r\n        get width () { return state.width && Math.floor(state.width); },\r\n        get height () { return state.height && Math.floor(state.height); },\r\n        get isMaximized () { return state.isMaximized; },\r\n        get isMinimized () { return state.isMinimized; },\r\n        get isHidden () { return state.isHidden; },\r\n        saveState: _.debounce(saveState, 1000)\r\n    };\r\n}\r\n","import { app, ipcMain, BrowserWindow, dialog } from 'electron';\r\nimport { autoUpdater } from 'electron-updater';\r\nimport jetpack from 'fs-jetpack';\r\nimport i18n from '../i18n/index.js';\r\n\r\nconst installDir = jetpack.cwd(app.getAppPath());\r\nconst userDataDir = jetpack.cwd(app.getPath('userData'));\r\nconst updateStoreFile = 'update.json';\r\nlet checkForUpdatesEvent;\r\n\r\nautoUpdater.autoDownload = false;\r\n\r\nlet updateFile = {};\r\ntry {\r\n    const installUpdateFile = installDir.read(updateStoreFile, 'json');\r\n    const userUpdateFile = userDataDir.read(updateStoreFile, 'json');\r\n    updateFile = Object.assign({}, installUpdateFile, userUpdateFile);\r\n} catch (err) {\r\n    console.error(err);\r\n}\r\n\r\nfunction updateDownloaded () {\r\n    dialog.showMessageBox({\r\n        title: i18n.__('Update_ready'),\r\n        message: i18n.__('Update_ready_message'),\r\n        buttons: [\r\n            i18n.__('Update_Install_Later'),\r\n            i18n.__('Update_Install_Now')\r\n        ],\r\n        defaultId: 1\r\n    }, (response) => {\r\n        if (response === 0) {\r\n            dialog.showMessageBox({\r\n                title: i18n.__('Update_installing_later'),\r\n                message: i18n.__('Update_installing_later_message')\r\n            });\r\n        } else {\r\n            autoUpdater.quitAndInstall();\r\n            setTimeout(() => app.quit(), 1000);\r\n        }\r\n    });\r\n}\r\n\r\nfunction updateNotAvailable () {\r\n    if (checkForUpdatesEvent) {\r\n        checkForUpdatesEvent.sender.send('update-result', false);\r\n        checkForUpdatesEvent = null;\r\n    }\r\n}\r\n\r\nfunction updateAvailable ({version}) {\r\n    //注释掉自动更新\r\n    return;\r\n    if (checkForUpdatesEvent) {\r\n        checkForUpdatesEvent.sender.send('update-result', true);\r\n        checkForUpdatesEvent = null;\r\n    } else if (updateFile.skip === version) {\r\n        return;\r\n    }\r\n\r\n    let window = new BrowserWindow({\r\n        title: i18n.__('Update_Available'),\r\n        width: 600,\r\n        height: 330,\r\n        show : false,\r\n        center: true,\r\n        resizable: false,\r\n        maximizable: false,\r\n        minimizable: false\r\n    });\r\n\r\n    window.loadURL(`file://${__dirname}/public/update.html`);\r\n    window.setMenuBarVisibility(false);\r\n\r\n    window.webContents.on('did-finish-load', () => {\r\n        window.webContents.send('new-version', version);\r\n        window.show();\r\n    });\r\n\r\n    ipcMain.once('update-response', (e, type) => {\r\n        switch (type) {\r\n            case 'skip':\r\n                updateFile.skip = version;\r\n                userDataDir.write(updateStoreFile, updateFile, { atomic: true });\r\n                dialog.showMessageBox({\r\n                    title: i18n.__('Update_skip'),\r\n                    message: i18n.__('Update_skip_message')\r\n                }, () => window.close());\r\n                break;\r\n            case 'remind':\r\n                dialog.showMessageBox({\r\n                    title: i18n.__('Update_remind'),\r\n                    message: i18n.__('Update_remind_message')\r\n                }, () => window.close());\r\n                break;\r\n            case 'update':\r\n                dialog.showMessageBox({\r\n                    title: i18n.__('Update_downloading'),\r\n                    message: i18n.__('Update_downloading_message')\r\n                }, () => window.close());\r\n                autoUpdater.downloadUpdate();\r\n                break;\r\n        }\r\n    });\r\n\r\n    window.on('closed', () => {\r\n        window = null;\r\n        ipcMain.removeAllListeners('update-response');\r\n    });\r\n}\r\n\r\nfunction checkForUpdates () {\r\n    autoUpdater.on('update-available', updateAvailable);\r\n    autoUpdater.on('update-not-available', updateNotAvailable);\r\n\r\n    autoUpdater.on('update-downloaded', updateDownloaded);\r\n\r\n    // Event from about window\r\n    ipcMain.on('check-for-updates', (e, autoUpdate) => {\r\n        if (autoUpdate === true || autoUpdate === false) {\r\n            updateFile.autoUpdate = autoUpdate;\r\n            userDataDir.write(updateStoreFile, updateFile, { atomic: true });\r\n        } else if (autoUpdate === 'auto') {\r\n            e.returnValue = updateFile.autoUpdate !== false;\r\n        } else {\r\n            checkForUpdatesEvent = e;\r\n            autoUpdater.checkForUpdates();\r\n        }\r\n    });\r\n\r\n    if (updateFile.autoUpdate !== false) {\r\n        autoUpdater.checkForUpdates();\r\n    }\r\n}\r\n\r\nexport {\r\n    checkForUpdates\r\n};\r\n","// This is main process of Electron, started as first thing when your\r\n// app starts. This script is running through entire life of your application.\r\n// It doesn't have any windows which you can see on screen, but we can open\r\n// window from here.\r\n\r\nimport { app, ipcMain, BrowserWindow } from 'electron';\r\nimport windowStateKeeper from './background/windowState';\r\nimport certificate from './background/certificate';\r\nimport idle from '@paulcbetts/system-idle-time';\r\nimport { checkForUpdates } from './background/autoUpdate';\r\n\r\n\r\nprocess.env.GOOGLE_API_KEY = 'AIzaSyADqUh_c1Qhji3Cp1NE43YrcpuPkmhXD-c';\r\n\r\nlet screenshareEvent;\r\nipcMain.on('screenshare', (event, sources) => {\r\n    screenshareEvent = event;\r\n    let mainWindow = new BrowserWindow({\r\n        width: 776,\r\n        height: 600,\r\n        show : false,\r\n        skipTaskbar: false\r\n    });\r\n\r\n    mainWindow.loadURL('file://'+__dirname+'/public/screenshare.html');\r\n\r\n    //window.openDevTools();\r\n    mainWindow.webContents.on('did-finish-load', () => {\r\n        mainWindow.webContents.send('sources', sources);\r\n        mainWindow.show();\r\n    });\r\n\r\n    mainWindow.on('closed', () => {\r\n        mainWindow = null;\r\n        if (screenshareEvent) {\r\n            screenshareEvent.sender.send('screenshare-result', 'PermissionDeniedError');\r\n            screenshareEvent = null;\r\n        }\r\n    });\r\n});\r\n\r\nipcMain.on('source-result', (e, sourceId) => {\r\n    if (screenshareEvent) {\r\n        screenshareEvent.sender.send('screenshare-result', sourceId);\r\n        screenshareEvent = null;\r\n    }\r\n});\r\n\r\nexport function afterMainWindow (mainWindow) {\r\n    if (!app.isDefaultProtocolClient('rocketchat')) {\r\n        app.setAsDefaultProtocolClient('rocketchat');\r\n    }\r\n    // Preserver of the window size and position between app launches.\r\n    const mainWindowState = windowStateKeeper('main', {\r\n        width: 1000,\r\n        height: 600\r\n    });\r\n\r\n    if (mainWindowState.x !== undefined && mainWindowState.y !== undefined) {\r\n        mainWindow.setPosition(mainWindowState.x, mainWindowState.y, false);\r\n    }\r\n    if (mainWindowState.width !== undefined && mainWindowState.height !== undefined) {\r\n        mainWindow.setSize(mainWindowState.width, mainWindowState.height, false);\r\n    }\r\n    mainWindow.setMinimumSize(600, 400);\r\n\r\n    if (mainWindowState.isMaximized) {\r\n        mainWindow.maximize();\r\n    }\r\n\r\n    if (mainWindowState.isMinimized) {\r\n        mainWindow.minimize();\r\n    }\r\n\r\n    if (mainWindowState.isHidden) {\r\n        mainWindow.hide();\r\n    }\r\n\r\n    mainWindow.on('close', function (event) {\r\n        if (mainWindow.forceClose) {\r\n            mainWindowState.saveState(mainWindow);\r\n            return;\r\n        }\r\n        event.preventDefault();\r\n        if (mainWindow.isFullScreen()) {\r\n            mainWindow.once('leave-full-screen', () => {\r\n                mainWindow.hide();\r\n            });\r\n            mainWindow.setFullScreen(false);\r\n        } else {\r\n            mainWindow.hide();\r\n        }\r\n        mainWindowState.saveState(mainWindow);\r\n    });\r\n\r\n    app.on('before-quit', function () {\r\n        mainWindowState.saveState(mainWindow);\r\n        mainWindow.forceClose = true;\r\n    });\r\n\r\n    mainWindow.on('resize', function () {\r\n        mainWindowState.saveState(mainWindow);\r\n    });\r\n\r\n    mainWindow.on('move', function () {\r\n        mainWindowState.saveState(mainWindow);\r\n    });\r\n\r\n    app.on('activate', function () {\r\n        mainWindow.show();\r\n        mainWindowState.saveState(mainWindow);\r\n    });\r\n\r\n    mainWindow.webContents.on('will-navigate', function (event) {\r\n        event.preventDefault();\r\n    });\r\n\r\n    ipcMain.on('focus', () => {\r\n        mainWindow.show();\r\n        mainWindowState.saveState(mainWindow);\r\n    });\r\n\r\n    ipcMain.on('getSystemIdleTime', (event) => {\r\n        event.returnValue = idle.getIdleTime();\r\n    });\r\n\r\n    certificate.initWindow(mainWindow);\r\n\r\n    checkForUpdates();\r\n}\r\n","// Simple wrapper exposing environment variables to rest of the code.\r\n\r\nimport jetpack from 'fs-jetpack';\r\n\r\n// The variables have been written to `env.json` by the build process.\r\nconst env = jetpack.cwd(__dirname).read('env.json', 'json');\r\n\r\nexport default env;\r\n","// This is main process of Electron, started as first thing when your\r\n// app starts. This script is running through entire life of your application.\r\n// It doesn't have any windows which you can see on screen, but we can open\r\n// window from here.\r\n\r\nimport path from 'path';\r\nimport url from 'url';\r\nimport { app, Menu, BrowserWindow } from 'electron';\r\nimport { devMenuTemplate } from './menu/dev_menu_template';\r\nimport { editMenuTemplate } from './menu/edit_menu_template';\r\nimport './background/certificate';\r\n\r\nexport { default as remoteServers } from './background/servers';\r\nexport { default as certificate } from './background/certificate';\r\nimport { afterMainWindow } from './background.custom';\r\n\r\n// Special module holding environment variables which you declared\r\n// in config/env_xxx.json file.\r\nimport env from './env';\r\n\r\nconst setApplicationMenu = function () {\r\n    const menus = [editMenuTemplate];\r\n    if (env.name !== 'production') {\r\n        menus.push(devMenuTemplate);\r\n    }\r\n    Menu.setApplicationMenu(Menu.buildFromTemplate(menus));\r\n};\r\n\r\n// Save userData in separate folders for each environment.\r\n// Thanks to this you can use production and development versions of the app\r\n// on same machine like those are two separate apps.\r\nif (env.name !== 'production') {\r\n    const userDataPath = app.getPath('userData');\r\n    app.setPath('userData', userDataPath + ' (' + env.name + ')');\r\n}\r\n\r\nconst processProtocolArgv = (argv) => {\r\n    const protocolURI = argv.find(arg => arg.startsWith('rocketchat://'));\r\n    if (protocolURI) {\r\n        const site = protocolURI.split(/\\/|\\?/)[2];\r\n        if (site) {\r\n            let scheme = 'https://';\r\n            if (protocolURI.includes('insecure=true')) {\r\n                scheme = 'http://';\r\n            }\r\n            return scheme + site;\r\n        }\r\n    }\r\n};\r\n\r\nlet mainWindow = null;\r\nconst appIsReady = new Promise(resolve => {\r\n    if (app.isReady()) {\r\n        resolve();\r\n    } else {\r\n        app.on('ready', resolve);\r\n    }\r\n});\r\nif (process.platform === 'darwin') {\r\n    // Open protocol urls on mac as open-url is not yet implemented on other OS's\r\n    app.on('open-url', function (e, url) {\r\n        e.preventDefault();\r\n        const site = processProtocolArgv([url]);\r\n        if (site) {\r\n            appIsReady.then(() => setTimeout(() => mainWindow.send('add-host', site), 750));\r\n        }\r\n    });\r\n} else {\r\n    const isSecondInstance = app.makeSingleInstance((argv) => {\r\n        // Someone tried to run a second instance, we should focus our window.\r\n        const site = processProtocolArgv(argv);\r\n        if (site) {\r\n            appIsReady.then(() => mainWindow.send('add-host', site));\r\n        }\r\n        if (mainWindow) {\r\n            if (mainWindow.isMinimized()) {\r\n                mainWindow.restore();\r\n            }\r\n            mainWindow.show();\r\n        }\r\n    });\r\n    if (isSecondInstance) {\r\n        app.quit();\r\n    }\r\n}\r\n\r\napp.on('ready', function () {\r\n    setApplicationMenu();\r\n\r\n    mainWindow = new BrowserWindow({\r\n        width: 1000,\r\n        titleBarStyle: 'hidden',\r\n        height: 600\r\n    });\r\n\r\n    afterMainWindow(mainWindow);\r\n\r\n    mainWindow.loadURL(url.format({\r\n        pathname: path.join(__dirname, 'public', 'app.html'),\r\n        protocol: 'file:',\r\n        slashes: true\r\n    }));\r\n\r\n    if (env.name === 'development') {\r\n        mainWindow.openDevTools();\r\n    }\r\n});\r\n\r\napp.on('window-all-closed', function () {\r\n    app.quit();\r\n});\r\n"],"names":["app","remote","BrowserWindow","url","dialog","autoUpdater","ipcMain","certificate","Menu"],"mappings":";;;;;;;;;;;;;;;;AAKA,MAAM,IAAI,GAAGA,YAAG,IAAIC,eAAM,CAAC,GAAG,CAAC;;AAE/B,MAAM,IAAI,CAAC;;;;;IAKP,WAAW,CAAC,GAAG;QACX,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,cAAc,CAAC,CAAC;QAC/C,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;YACrB,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;SAC3C;QACD,MAAM,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;QACrD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC,CAAC;QACzE,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;QAC/D,IAAI,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;YACvB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC;YACzD,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;SAClE;KACJ;;;;;;;;IAQD,EAAE,CAAC,CAAC,MAAM,EAAE,GAAG,YAAY,EAAE;QACzB,MAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,MAAM,CAAC;QACvF,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,GAAG,YAAY,CAAC,CAAC;KACpD;CACJ;;AAED,WAAe,IAAI,IAAI,EAAE,CAAC;;ACnCnB,MAAM,eAAe,GAAG;IAC3B,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC;IAC7B,OAAO,EAAE,CAAC;QACN,KAAK,EAAE,QAAQ;QACf,WAAW,EAAE,aAAa;QAC1B,KAAK,EAAE,YAAY;YACfC,sBAAa,CAAC,gBAAgB,EAAE,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC;SACtE;KACJ,EAAE;QACC,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,iBAAiB,CAAC;QACjC,WAAW,EAAE,iBAAiB;QAC9B,KAAK,EAAE,YAAY;YACfA,sBAAa,CAAC,gBAAgB,EAAE,CAAC,cAAc,EAAE,CAAC;SACrD;KACJ,EAAE;QACC,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC;QACtB,WAAW,EAAE,aAAa;QAC1B,KAAK,EAAE,YAAY;YACfF,YAAG,CAAC,IAAI,EAAE,CAAC;SACd;KACJ,CAAC;CACL;;ACtBM,MAAM,gBAAgB,GAAG;IAC5B,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC;IACtB,OAAO,EAAE;QACL,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,OAAO,EAAE;QACzE,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,WAAW,EAAE,mBAAmB,EAAE,QAAQ,EAAE,OAAO,EAAE;QAC/E,EAAE,IAAI,EAAE,WAAW,EAAE;QACrB,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,MAAM,EAAE;QACvE,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,OAAO,EAAE;QACzE,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,QAAQ,EAAE;QAC3E,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,EAAE,WAAW,EAAE,aAAa,EAAE,QAAQ,EAAE,YAAY,EAAE;KACvF;CACJ;;ACRD,MAAM,gBAAgB,CAAC;IACnB,UAAU,CAAC,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,aAAa,GAAG,kBAAkB,CAAC;QACxC,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,GAAG,CAACA,YAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;;QAExD,IAAI,CAAC,IAAI,EAAE,CAAC;;;QAGZ,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;;QAEjB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QAClBA,YAAG,CAAC,EAAE,CAAC,mBAAmB,EAAE,CAAC,KAAK,EAAE,WAAW,EAAEG,MAAG,EAAE,KAAK,EAAE,WAAW,EAAE,QAAQ,KAAK;YACnF,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,IAAI,CAAC,SAAS,CAACA,MAAG,EAAE,WAAW,CAAC,EAAE;gBAClC,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACf,OAAO;aACV;;YAED,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC,EAAE;gBACtC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;;gBAEpD,OAAO;aACV,MAAM;gBACH,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;aACrD;;YAED,IAAI,MAAM,GAAG,CAAC,KAAK,EAAEA,MAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC,CAAC;YAC5C,IAAI,IAAI,CAAC,UAAU,CAACA,MAAG,CAAC,EAAE;gBACtB,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,6BAA6B,EAAE,MAAM,CAAC,CAAC;aAC3D;;YAEDC,eAAM,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE;gBAC/B,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,mBAAmB,CAAC;gBACnC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,2BAA2B,EAAE,WAAW,CAAC,UAAU,CAAC;gBACrE,MAAM,EAAE,MAAM;gBACd,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE;oBACL,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;oBACd,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC;iBAChB;gBACD,QAAQ,EAAE,CAAC;aACd,EAAE,CAAC,QAAQ,KAAK;gBACb,IAAI,QAAQ,KAAK,CAAC,EAAE;oBAChB,IAAI,CAAC,GAAG,CAACD,MAAG,EAAE,WAAW,CAAC,CAAC;oBAC3B,IAAI,CAAC,IAAI,EAAE,CAAC;oBACZ,IAAI,WAAW,CAAC,MAAM,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;wBAC/C,WAAW,CAAC,IAAI,CAAC,oBAAoB,EAAEA,MAAG,CAAC,CAAC;qBAC/C;iBACJ;;gBAED,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC;gBACvE,OAAO,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;aAC/C,CAAC,CAAC;SACN,CAAC,CAAC;KACN;;IAED,IAAI,CAAC,GAAG;QACJ,IAAI;YACA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;SACjE,CAAC,OAAO,CAAC,EAAE;YACR,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACjB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;SAClB;;QAED,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;YACzB,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;KACJ;;IAED,KAAK,CAAC,GAAG;QACL,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,IAAI,EAAE,CAAC;KACf;;IAED,IAAI,CAAC,GAAG;QACJ,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;KAC3E;;IAED,gBAAgB,CAAC,CAAC,WAAW,EAAE;QAC3B,OAAO,WAAW,CAAC,UAAU,GAAG,IAAI,GAAG,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;KACtE;;IAED,OAAO,CAAC,CAAC,OAAO,EAAE;QACd,OAAO,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;KAClC;;IAED,GAAG,CAAC,CAAC,OAAO,EAAE,WAAW,EAAE;QACvB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;KACxD;;IAED,UAAU,CAAC,CAAC,OAAO,EAAE;QACjB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACnC,OAAO,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;KACzC;;IAED,SAAS,CAAC,CAAC,OAAO,EAAE,WAAW,EAAE;QAC7B,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;YAC3B,OAAO,KAAK,CAAC;SAChB;QACD,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;KACjE;CACJ;;AAED,MAAM,gBAAgB,GAAG,IAAI,gBAAgB,EAAE;;AC5G/C,IAAI,OAAO,GAAG,EAAE,CAAC;;AAEjB,gBAAe;IACX,WAAW,CAAC,CAAC,CAAC,EAAE;QACZ,OAAO,GAAG,CAAC,CAAC;KACf;;IAED,UAAU,CAAC,GAAG;QACV,OAAO,OAAO,CAAC;KAClB;CACJ,CAAC;;AAEFH,YAAG,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,KAAK,EAAE,WAAW,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE;IACvE,KAAK,MAAMG,MAAG,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;QACpC,MAAM,MAAM,GAAG,OAAO,CAACA,MAAG,CAAC,CAAC;QAC5B,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO,CAACA,MAAG,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,QAAQ,EAAE;YACnD,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,CAAC,CAAC;YAC3C,MAAM;SACT;KACJ;CACJ,CAAC,CAAC;;ACtBH;;;;AAIA,AAIe,0BAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE;;IAErC,MAAM,WAAW,GAAG,OAAO,CAAC,GAAG,CAACH,YAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;IACzD,MAAM,cAAc,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IACnD,IAAI,KAAK,GAAG;QACR,KAAK,EAAE,QAAQ,CAAC,KAAK;QACrB,MAAM,EAAE,QAAQ,CAAC,MAAM;KAC1B,CAAC;;IAEF,IAAI;QACA,MAAM,WAAW,GAAG,WAAW,CAAC,IAAI,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;QAC7D,IAAI,WAAW,EAAE;YACb,KAAK,GAAG,WAAW,CAAC;SACvB;KACJ,CAAC,OAAO,GAAG,EAAE;;;KAGb;;IAED,MAAM,SAAS,GAAG,UAAU,GAAG,EAAE;QAC7B,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,GAAG,CAAC,SAAS,EAAE,EAAE;YAC7D,MAAM,QAAQ,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;YACnC,MAAM,IAAI,GAAG,GAAG,CAAC,OAAO,EAAE,CAAC;YAC3B,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;YACtB,KAAK,CAAC,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;YACtB,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;YACtB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;SAC1B;QACD,KAAK,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QACtC,KAAK,CAAC,WAAW,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QACtC,KAAK,CAAC,QAAQ,GAAG,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;QACxD,WAAW,CAAC,KAAK,CAAC,cAAc,EAAE,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;KAC9D,CAAC;;IAEF,OAAO;QACH,IAAI,CAAC,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;QACnD,IAAI,CAAC,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;QACnD,IAAI,KAAK,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE;QAC/D,IAAI,MAAM,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE;QAClE,IAAI,WAAW,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,WAAW,CAAC,EAAE;QAChD,IAAI,WAAW,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,WAAW,CAAC,EAAE;QAChD,IAAI,QAAQ,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,QAAQ,CAAC,EAAE;QAC1C,SAAS,EAAE,CAAC,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,CAAC;KACzC,CAAC;CACL;;AC/CD,MAAM,UAAU,GAAG,OAAO,CAAC,GAAG,CAACA,YAAG,CAAC,UAAU,EAAE,CAAC,CAAC;AACjD,MAAM,WAAW,GAAG,OAAO,CAAC,GAAG,CAACA,YAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;AACzD,MAAM,eAAe,GAAG,aAAa,CAAC;AACtC,IAAI,oBAAoB,CAAC;;AAEzBK,2BAAW,CAAC,YAAY,GAAG,KAAK,CAAC;;AAEjC,IAAI,UAAU,GAAG,EAAE,CAAC;AACpB,IAAI;IACA,MAAM,iBAAiB,GAAG,UAAU,CAAC,IAAI,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;IACnE,MAAM,cAAc,GAAG,WAAW,CAAC,IAAI,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;IACjE,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,iBAAiB,EAAE,cAAc,CAAC,CAAC;CACrE,CAAC,OAAO,GAAG,EAAE;IACV,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;CACtB;;AAED,SAAS,gBAAgB,IAAI;IACzBD,eAAM,CAAC,cAAc,CAAC;QAClB,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,cAAc,CAAC;QAC9B,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,sBAAsB,CAAC;QACxC,OAAO,EAAE;YACL,IAAI,CAAC,EAAE,CAAC,sBAAsB,CAAC;YAC/B,IAAI,CAAC,EAAE,CAAC,oBAAoB,CAAC;SAChC;QACD,SAAS,EAAE,CAAC;KACf,EAAE,CAAC,QAAQ,KAAK;QACb,IAAI,QAAQ,KAAK,CAAC,EAAE;YAChBA,eAAM,CAAC,cAAc,CAAC;gBAClB,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,yBAAyB,CAAC;gBACzC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,iCAAiC,CAAC;aACtD,CAAC,CAAC;SACN,MAAM;YACHC,2BAAW,CAAC,cAAc,EAAE,CAAC;YAC7B,UAAU,CAAC,MAAML,YAAG,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC;SACtC;KACJ,CAAC,CAAC;CACN;;AAED,SAAS,kBAAkB,IAAI;IAC3B,IAAI,oBAAoB,EAAE;QACtB,oBAAoB,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;QACzD,oBAAoB,GAAG,IAAI,CAAC;KAC/B;CACJ;;AAED,SAAS,eAAe,EAAE,CAAC,OAAO,CAAC,EAAE;;IAEjC,OAAO;IACP,IAAI,oBAAoB,EAAE;QACtB,oBAAoB,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;QACxD,oBAAoB,GAAG,IAAI,CAAC;KAC/B,MAAM,IAAI,UAAU,CAAC,IAAI,KAAK,OAAO,EAAE;QACpC,OAAO;KACV;;IAED,IAAI,MAAM,GAAG,IAAIE,sBAAa,CAAC;QAC3B,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,kBAAkB,CAAC;QAClC,KAAK,EAAE,GAAG;QACV,MAAM,EAAE,GAAG;QACX,IAAI,GAAG,KAAK;QACZ,MAAM,EAAE,IAAI;QACZ,SAAS,EAAE,KAAK;QAChB,WAAW,EAAE,KAAK;QAClB,WAAW,EAAE,KAAK;KACrB,CAAC,CAAC;;IAEH,MAAM,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,mBAAmB,CAAC,CAAC,CAAC;IACzD,MAAM,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;;IAEnC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,iBAAiB,EAAE,MAAM;QAC3C,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;QAChD,MAAM,CAAC,IAAI,EAAE,CAAC;KACjB,CAAC,CAAC;;IAEHI,gBAAO,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAC,EAAE,IAAI,KAAK;QACzC,QAAQ,IAAI;YACR,KAAK,MAAM;gBACP,UAAU,CAAC,IAAI,GAAG,OAAO,CAAC;gBAC1B,WAAW,CAAC,KAAK,CAAC,eAAe,EAAE,UAAU,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;gBACjEF,eAAM,CAAC,cAAc,CAAC;oBAClB,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC;oBAC7B,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,qBAAqB,CAAC;iBAC1C,EAAE,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;gBACzB,MAAM;YACV,KAAK,QAAQ;gBACTA,eAAM,CAAC,cAAc,CAAC;oBAClB,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,eAAe,CAAC;oBAC/B,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,uBAAuB,CAAC;iBAC5C,EAAE,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;gBACzB,MAAM;YACV,KAAK,QAAQ;gBACTA,eAAM,CAAC,cAAc,CAAC;oBAClB,KAAK,EAAE,IAAI,CAAC,EAAE,CAAC,oBAAoB,CAAC;oBACpC,OAAO,EAAE,IAAI,CAAC,EAAE,CAAC,4BAA4B,CAAC;iBACjD,EAAE,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;gBACzBC,2BAAW,CAAC,cAAc,EAAE,CAAC;gBAC7B,MAAM;SACb;KACJ,CAAC,CAAC;;IAEH,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM;QACtB,MAAM,GAAG,IAAI,CAAC;QACdC,gBAAO,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,CAAC;KACjD,CAAC,CAAC;CACN;;AAED,SAAS,eAAe,IAAI;IACxBD,2BAAW,CAAC,EAAE,CAAC,kBAAkB,EAAE,eAAe,CAAC,CAAC;IACpDA,2BAAW,CAAC,EAAE,CAAC,sBAAsB,EAAE,kBAAkB,CAAC,CAAC;;IAE3DA,2BAAW,CAAC,EAAE,CAAC,mBAAmB,EAAE,gBAAgB,CAAC,CAAC;;;IAGtDC,gBAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,CAAC,CAAC,EAAE,UAAU,KAAK;QAC/C,IAAI,UAAU,KAAK,IAAI,IAAI,UAAU,KAAK,KAAK,EAAE;YAC7C,UAAU,CAAC,UAAU,GAAG,UAAU,CAAC;YACnC,WAAW,CAAC,KAAK,CAAC,eAAe,EAAE,UAAU,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;SACpE,MAAM,IAAI,UAAU,KAAK,MAAM,EAAE;YAC9B,CAAC,CAAC,WAAW,GAAG,UAAU,CAAC,UAAU,KAAK,KAAK,CAAC;SACnD,MAAM;YACH,oBAAoB,GAAG,CAAC,CAAC;YACzBD,2BAAW,CAAC,eAAe,EAAE,CAAC;SACjC;KACJ,CAAC,CAAC;;IAEH,IAAI,UAAU,CAAC,UAAU,KAAK,KAAK,EAAE;QACjCA,2BAAW,CAAC,eAAe,EAAE,CAAC;KACjC;CACJ;;ACrID;;;;;AAKA,AAOA,OAAO,CAAC,GAAG,CAAC,cAAc,GAAG,yCAAyC,CAAC;;AAEvE,IAAI,gBAAgB,CAAC;AACrBC,gBAAO,CAAC,EAAE,CAAC,aAAa,EAAE,CAAC,KAAK,EAAE,OAAO,KAAK;IAC1C,gBAAgB,GAAG,KAAK,CAAC;IACzB,IAAI,UAAU,GAAG,IAAIJ,sBAAa,CAAC;QAC/B,KAAK,EAAE,GAAG;QACV,MAAM,EAAE,GAAG;QACX,IAAI,GAAG,KAAK;QACZ,WAAW,EAAE,KAAK;KACrB,CAAC,CAAC;;IAEH,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,0BAA0B,CAAC,CAAC;;;IAGnE,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC,iBAAiB,EAAE,MAAM;QAC/C,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QAChD,UAAU,CAAC,IAAI,EAAE,CAAC;KACrB,CAAC,CAAC;;IAEH,UAAU,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM;QAC1B,UAAU,GAAG,IAAI,CAAC;QAClB,IAAI,gBAAgB,EAAE;YAClB,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,EAAE,uBAAuB,CAAC,CAAC;YAC5E,gBAAgB,GAAG,IAAI,CAAC;SAC3B;KACJ,CAAC,CAAC;CACN,CAAC,CAAC;;AAEHI,gBAAO,CAAC,EAAE,CAAC,eAAe,EAAE,CAAC,CAAC,EAAE,QAAQ,KAAK;IACzC,IAAI,gBAAgB,EAAE;QAClB,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,EAAE,QAAQ,CAAC,CAAC;QAC7D,gBAAgB,GAAG,IAAI,CAAC;KAC3B;CACJ,CAAC,CAAC;;AAEH,AAAO,SAAS,eAAe,EAAE,UAAU,EAAE;IACzC,IAAI,CAACN,YAAG,CAAC,uBAAuB,CAAC,YAAY,CAAC,EAAE;QAC5CA,YAAG,CAAC,0BAA0B,CAAC,YAAY,CAAC,CAAC;KAChD;;IAED,MAAM,eAAe,GAAG,iBAAiB,CAAC,MAAM,EAAE;QAC9C,KAAK,EAAE,IAAI;QACX,MAAM,EAAE,GAAG;KACd,CAAC,CAAC;;IAEH,IAAI,eAAe,CAAC,CAAC,KAAK,SAAS,IAAI,eAAe,CAAC,CAAC,KAAK,SAAS,EAAE;QACpE,UAAU,CAAC,WAAW,CAAC,eAAe,CAAC,CAAC,EAAE,eAAe,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;KACvE;IACD,IAAI,eAAe,CAAC,KAAK,KAAK,SAAS,IAAI,eAAe,CAAC,MAAM,KAAK,SAAS,EAAE;QAC7E,UAAU,CAAC,OAAO,CAAC,eAAe,CAAC,KAAK,EAAE,eAAe,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;KAC5E;IACD,UAAU,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;;IAEpC,IAAI,eAAe,CAAC,WAAW,EAAE;QAC7B,UAAU,CAAC,QAAQ,EAAE,CAAC;KACzB;;IAED,IAAI,eAAe,CAAC,WAAW,EAAE;QAC7B,UAAU,CAAC,QAAQ,EAAE,CAAC;KACzB;;IAED,IAAI,eAAe,CAAC,QAAQ,EAAE;QAC1B,UAAU,CAAC,IAAI,EAAE,CAAC;KACrB;;IAED,UAAU,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,KAAK,EAAE;QACpC,IAAI,UAAU,CAAC,UAAU,EAAE;YACvB,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;YACtC,OAAO;SACV;QACD,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,UAAU,CAAC,YAAY,EAAE,EAAE;YAC3B,UAAU,CAAC,IAAI,CAAC,mBAAmB,EAAE,MAAM;gBACvC,UAAU,CAAC,IAAI,EAAE,CAAC;aACrB,CAAC,CAAC;YACH,UAAU,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;SACnC,MAAM;YACH,UAAU,CAAC,IAAI,EAAE,CAAC;SACrB;QACD,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;KACzC,CAAC,CAAC;;IAEHA,YAAG,CAAC,EAAE,CAAC,aAAa,EAAE,YAAY;QAC9B,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QACtC,UAAU,CAAC,UAAU,GAAG,IAAI,CAAC;KAChC,CAAC,CAAC;;IAEH,UAAU,CAAC,EAAE,CAAC,QAAQ,EAAE,YAAY;QAChC,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;KACzC,CAAC,CAAC;;IAEH,UAAU,CAAC,EAAE,CAAC,MAAM,EAAE,YAAY;QAC9B,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;KACzC,CAAC,CAAC;;IAEHA,YAAG,CAAC,EAAE,CAAC,UAAU,EAAE,YAAY;QAC3B,UAAU,CAAC,IAAI,EAAE,CAAC;QAClB,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;KACzC,CAAC,CAAC;;IAEH,UAAU,CAAC,WAAW,CAAC,EAAE,CAAC,eAAe,EAAE,UAAU,KAAK,EAAE;QACxD,KAAK,CAAC,cAAc,EAAE,CAAC;KAC1B,CAAC,CAAC;;IAEHM,gBAAO,CAAC,EAAE,CAAC,OAAO,EAAE,MAAM;QACtB,UAAU,CAAC,IAAI,EAAE,CAAC;QAClB,eAAe,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;KACzC,CAAC,CAAC;;IAEHA,gBAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,CAAC,KAAK,KAAK;QACvC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;KAC1C,CAAC,CAAC;;IAEHC,gBAAW,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;;IAEnC,eAAe,EAAE,CAAC;CACrB;;ACjID;;AAEA,AAEA;AACA,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC;;ACL3D;;;;;AAKA,AAWA;;AAEA,AAEA,MAAM,kBAAkB,GAAG,YAAY;IACnC,MAAM,KAAK,GAAG,CAAC,gBAAgB,CAAC,CAAC;IACjC,IAAI,GAAG,CAAC,IAAI,KAAK,YAAY,EAAE;QAC3B,KAAK,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;KAC/B;IACDC,aAAI,CAAC,kBAAkB,CAACA,aAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC;CAC1D,CAAC;;;;;AAKF,IAAI,GAAG,CAAC,IAAI,KAAK,YAAY,EAAE;IAC3B,MAAM,YAAY,GAAGR,YAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;IAC7CA,YAAG,CAAC,OAAO,CAAC,UAAU,EAAE,YAAY,GAAG,IAAI,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;CACjE;;AAED,MAAM,mBAAmB,GAAG,CAAC,IAAI,KAAK;IAClC,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,GAAG,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,CAAC;IACtE,IAAI,WAAW,EAAE;QACb,MAAM,IAAI,GAAG,WAAW,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;QAC3C,IAAI,IAAI,EAAE;YACN,IAAI,MAAM,GAAG,UAAU,CAAC;YACxB,IAAI,WAAW,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE;gBACvC,MAAM,GAAG,SAAS,CAAC;aACtB;YACD,OAAO,MAAM,GAAG,IAAI,CAAC;SACxB;KACJ;CACJ,CAAC;;AAEF,IAAI,UAAU,GAAG,IAAI,CAAC;AACtB,MAAM,UAAU,GAAG,IAAI,OAAO,CAAC,OAAO,IAAI;IACtC,IAAIA,YAAG,CAAC,OAAO,EAAE,EAAE;QACf,OAAO,EAAE,CAAC;KACb,MAAM;QACHA,YAAG,CAAC,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;KAC5B;CACJ,CAAC,CAAC;AACH,IAAI,OAAO,CAAC,QAAQ,KAAK,QAAQ,EAAE;;IAE/BA,YAAG,CAAC,EAAE,CAAC,UAAU,EAAE,UAAU,CAAC,EAAEG,MAAG,EAAE;QACjC,CAAC,CAAC,cAAc,EAAE,CAAC;QACnB,MAAM,IAAI,GAAG,mBAAmB,CAAC,CAACA,MAAG,CAAC,CAAC,CAAC;QACxC,IAAI,IAAI,EAAE;YACN,UAAU,CAAC,IAAI,CAAC,MAAM,UAAU,CAAC,MAAM,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;SACnF;KACJ,CAAC,CAAC;CACN,MAAM;IACH,MAAM,gBAAgB,GAAGH,YAAG,CAAC,kBAAkB,CAAC,CAAC,IAAI,KAAK;;QAEtD,MAAM,IAAI,GAAG,mBAAmB,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,IAAI,EAAE;YACN,UAAU,CAAC,IAAI,CAAC,MAAM,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC;SAC5D;QACD,IAAI,UAAU,EAAE;YACZ,IAAI,UAAU,CAAC,WAAW,EAAE,EAAE;gBAC1B,UAAU,CAAC,OAAO,EAAE,CAAC;aACxB;YACD,UAAU,CAAC,IAAI,EAAE,CAAC;SACrB;KACJ,CAAC,CAAC;IACH,IAAI,gBAAgB,EAAE;QAClBA,YAAG,CAAC,IAAI,EAAE,CAAC;KACd;CACJ;;AAEDA,YAAG,CAAC,EAAE,CAAC,OAAO,EAAE,YAAY;IACxB,kBAAkB,EAAE,CAAC;;IAErB,UAAU,GAAG,IAAIE,sBAAa,CAAC;QAC3B,KAAK,EAAE,IAAI;QACX,aAAa,EAAE,QAAQ;QACvB,MAAM,EAAE,GAAG;KACd,CAAC,CAAC;;IAEH,eAAe,CAAC,UAAU,CAAC,CAAC;;IAE5B,UAAU,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;QAC1B,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,EAAE,UAAU,CAAC;QACpD,QAAQ,EAAE,OAAO;QACjB,OAAO,EAAE,IAAI;KAChB,CAAC,CAAC,CAAC;;IAEJ,IAAI,GAAG,CAAC,IAAI,KAAK,aAAa,EAAE;QAC5B,UAAU,CAAC,YAAY,EAAE,CAAC;KAC7B;CACJ,CAAC,CAAC;;AAEHF,YAAG,CAAC,EAAE,CAAC,mBAAmB,EAAE,YAAY;IACpCA,YAAG,CAAC,IAAI,EAAE,CAAC;CACd,CAAC,CAAC;;;;;"}