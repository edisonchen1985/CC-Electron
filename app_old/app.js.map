{"version":3,"file":"app.js","sources":["src/branding/branding.js","src/i18n/index.js","src/scripts/servers.js","src/scripts/webview.js","src/scripts/menus/app.js","src/scripts/menus/edit.js","src/scripts/tray.js","src/scripts/menus/view.js","src/scripts/menus/history.js","src/scripts/menus/window.js","src/scripts/menus/help.js","src/scripts/menus.js","src/scripts/sidebar.js","src/scripts/start.js","src/app.js"],"sourcesContent":["// Add your custom JS code here\r\n","import path from 'path';\r\nimport fs from 'fs';\r\nimport util from 'util';\r\nimport { app, remote } from 'electron';\r\n\r\nconst eApp = app || remote.app;\r\n\r\nclass I18n {\r\n    /**\r\n     * Load users language if available, and fallback to english for any missing strings\r\n     * @constructor\r\n     */\r\n    constructor () {\r\n        let dir = path.join(__dirname, '../i18n/lang');\r\n        if (!fs.existsSync(dir)) {\r\n            dir = path.join(__dirname, 'i18n/lang');\r\n        }\r\n        const defaultLocale = path.join(dir, 'zh.i18n.json');\r\n        this.loadedLanguage = JSON.parse(fs.readFileSync(defaultLocale, 'utf8'));\r\n        const locale = path.join(dir, `${eApp.getLocale()}.i18n.json`);\r\n        if (fs.existsSync(locale)) {\r\n            const lang = JSON.parse(fs.readFileSync(locale, 'utf8'));\r\n            this.loadedLanguage = Object.assign(this.loadedLanguage, lang);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get translation string\r\n     * @param {string} phrase The key for the translation string\r\n     * @param {...string|number} replacements List of replacements in template strings\r\n     * @return {string} Translation in users language\r\n     */\r\n    __ (phrase, ...replacements) {\r\n        const translation = this.loadedLanguage[phrase] ? this.loadedLanguage[phrase] : phrase;\r\n        return util.format(translation, ...replacements);\r\n    }\r\n}\r\n\r\nexport default new I18n();\r\n","/* globals $ */\r\n\r\nimport jetpack from 'fs-jetpack';\r\nimport { EventEmitter } from 'events';\r\nimport { remote, ipcRenderer } from 'electron';\r\nimport i18n from '../i18n/index.js';\r\nconst remoteServers = remote.require('./background').remoteServers;\r\n\r\nclass Servers extends EventEmitter {\r\n    constructor () {\r\n        super();\r\n        this.load();\r\n        const processProtocol = this.getProtocolUrlFromProcess(remote.process.argv);\r\n        if (processProtocol) {\r\n            this.showHostConfirmation(processProtocol);\r\n        }\r\n        ipcRenderer.on('add-host', (e, host) => {\r\n            if (this.hostExists(host)) {\r\n                this.setActive(host);\r\n            } else {\r\n                this.showHostConfirmation(host);\r\n            }\r\n        });\r\n    }\r\n\r\n    get hosts () {\r\n        return this._hosts;\r\n    }\r\n\r\n    set hosts (hosts) {\r\n        this._hosts = hosts;\r\n        this.save();\r\n        return true;\r\n    }\r\n\r\n    get hostsKey () {\r\n        return 'rocket.chat.hosts';\r\n    }\r\n\r\n    get activeKey () {\r\n        return 'rocket.chat.currentHost';\r\n    }\r\n\r\n    load () {\r\n        let hosts = localStorage.getItem(this.hostsKey);\r\n\r\n        try {\r\n            hosts = JSON.parse(hosts);\r\n        } catch (e) {\r\n            if (typeof hosts === 'string' && hosts.match(/^https?:\\/\\//)) {\r\n                hosts = {};\r\n                hosts[hosts] = {\r\n                    title: hosts,\r\n                    url: hosts\r\n                };\r\n            }\r\n\r\n            localStorage.setItem(this.hostsKey, JSON.stringify(hosts));\r\n        }\r\n\r\n        if (hosts === null) {\r\n            hosts = {};\r\n        }\r\n\r\n        if (Array.isArray(hosts)) {\r\n            const oldHosts = hosts;\r\n            hosts = {};\r\n            oldHosts.forEach(function (item) {\r\n                item = item.replace(/\\/$/, '');\r\n                hosts[item] = {\r\n                    title: item,\r\n                    url: item\r\n                };\r\n            });\r\n            localStorage.setItem(this.hostsKey, JSON.stringify(hosts));\r\n        }\r\n\r\n        // Load server info from server config file\r\n        if (Object.keys(hosts).length === 0) {\r\n            const path = jetpack.find(remote.app.getPath('userData'), { matching: 'servers.json'})[0] ||\r\n                jetpack.find(jetpack.path(remote.app.getAppPath(), '..'), { matching: 'servers.json'})[0];\r\n\r\n            if (path) {\r\n                const pathToServerJson = jetpack.path(path);\r\n\r\n                try {\r\n                    const result = jetpack.read(pathToServerJson, 'json');\r\n                    if (result) {\r\n                        hosts = {};\r\n                        Object.keys(result).forEach((title) => {\r\n                            const url = result[title];\r\n                            hosts[url] = { title, url };\r\n                        });\r\n                        localStorage.setItem(this.hostsKey, JSON.stringify(hosts));\r\n                        // Assume user doesn't want sidebar if they only have one server\r\n                        if (Object.keys(hosts).length === 1) {\r\n                            localStorage.setItem('sidebar-closed', 'true');\r\n                        }\r\n                    }\r\n\r\n                } catch (e) {\r\n                    console.error('Server file invalid');\r\n                }\r\n            }\r\n        }\r\n\r\n        this._hosts = hosts;\r\n        remoteServers.loadServers(this._hosts);\r\n        this.emit('loaded');\r\n    }\r\n\r\n    save () {\r\n        localStorage.setItem(this.hostsKey, JSON.stringify(this._hosts));\r\n        this.emit('saved');\r\n    }\r\n\r\n    get (hostUrl) {\r\n        return this.hosts[hostUrl];\r\n    }\r\n\r\n    forEach (cb) {\r\n        for (const host in this.hosts) {\r\n            if (this.hosts.hasOwnProperty(host)) {\r\n                cb(this.hosts[host]);\r\n            }\r\n        }\r\n    }\r\n\r\n    validateHost (hostUrl, timeout) {\r\n        timeout = timeout || 5000;\r\n        return new Promise(function (resolve, reject) {\r\n            let resolved = false;\r\n            $.getJSON(`${hostUrl}/api/info`).then(function () {\r\n                if (resolved) {\r\n                    return;\r\n                }\r\n                resolved = true;\r\n                resolve();\r\n            }, function (request) {\r\n                if (request.status === 401) {\r\n                    const authHeader = request.getResponseHeader('www-authenticate');\r\n                    if (authHeader && authHeader.toLowerCase().indexOf('basic ') === 0) {\r\n                        resolved = true;\r\n                        reject('basic-auth');\r\n                    }\r\n                }\r\n                if (resolved) {\r\n                    return;\r\n                }\r\n                resolved = true;\r\n                reject('invalid');\r\n            });\r\n            if (timeout) {\r\n                setTimeout(function () {\r\n                    if (resolved) {\r\n                        return;\r\n                    }\r\n                    resolved = true;\r\n                    reject('timeout');\r\n                }, timeout);\r\n            }\r\n        });\r\n    }\r\n\r\n    hostExists (hostUrl) {\r\n        const hosts = this.hosts;\r\n\r\n        return !!hosts[hostUrl];\r\n    }\r\n\r\n    addHost (hostUrl) {\r\n        const hosts = this.hosts;\r\n\r\n        const match = hostUrl.match(/^(https?:\\/\\/)([^:]+):([^@]+)@(.+)$/);\r\n        let username;\r\n        let password;\r\n        let authUrl;\r\n        if (match) {\r\n            authUrl = hostUrl;\r\n            hostUrl = match[1] + match[4];\r\n            username = match[2];\r\n            password = match[3];\r\n        }\r\n\r\n        if (this.hostExists(hostUrl) === true) {\r\n            this.setActive(hostUrl);\r\n            return false;\r\n        }\r\n\r\n        hosts[hostUrl] = {\r\n            title: hostUrl,\r\n            url: hostUrl,\r\n            authUrl: authUrl,\r\n            username: username,\r\n            password: password\r\n        };\r\n        this.hosts = hosts;\r\n\r\n        remoteServers.loadServers(this.hosts);\r\n\r\n        this.emit('host-added', hostUrl);\r\n\r\n        return hostUrl;\r\n    }\r\n\r\n    removeHost (hostUrl) {\r\n        const hosts = this.hosts;\r\n        if (hosts[hostUrl]) {\r\n            delete hosts[hostUrl];\r\n            this.hosts = hosts;\r\n\r\n            remoteServers.loadServers(this.hosts);\r\n\r\n            if (this.active === hostUrl) {\r\n                this.clearActive();\r\n            }\r\n            this.emit('host-removed', hostUrl);\r\n        }\r\n    }\r\n\r\n    get active () {\r\n        return localStorage.getItem(this.activeKey);\r\n    }\r\n\r\n    setActive (hostUrl) {\r\n        let url;\r\n        if (this.hostExists(hostUrl)) {\r\n            url = hostUrl;\r\n        } else if (Object.keys(this._hosts).length > 0) {\r\n            url = Object.keys(this._hosts)[0];\r\n        }\r\n\r\n        if (url) {\r\n            localStorage.setItem(this.activeKey, hostUrl);\r\n            this.emit('active-setted', url);\r\n            return true;\r\n        }\r\n        this.emit('loaded');\r\n        return false;\r\n    }\r\n\r\n    restoreActive () {\r\n        this.setActive(this.active);\r\n    }\r\n\r\n    clearActive () {\r\n        localStorage.removeItem(this.activeKey);\r\n        this.emit('active-cleared');\r\n        return true;\r\n    }\r\n\r\n    setHostTitle (hostUrl, title) {\r\n        if (title === 'Rocket.Chat' && /https?:\\/\\/open\\.rocket\\.chat/.test(hostUrl) === false) {\r\n            title += ' - ' + hostUrl;\r\n        }\r\n        const hosts = this.hosts;\r\n        hosts[hostUrl].title = title;\r\n        this.hosts = hosts;\r\n        this.emit('title-setted', hostUrl, title);\r\n    }\r\n    getProtocolUrlFromProcess (args) {\r\n        let site = null;\r\n        if (args.length > 1) {\r\n            const protocolURI = args.find(arg => arg.startsWith('rocketchat://'));\r\n            if (protocolURI) {\r\n                site = protocolURI.split(/\\/|\\?/)[2];\r\n                if (site) {\r\n                    let scheme = 'https://';\r\n                    if (protocolURI.includes('insecure=true')) {\r\n                        scheme = 'http://';\r\n                    }\r\n                    site = scheme + site;\r\n                }\r\n            }\r\n        }\r\n        return site;\r\n    }\r\n    showHostConfirmation (host) {\r\n        return remote.dialog.showMessageBox({\r\n            type: 'question',\r\n            buttons: [i18n.__('Add'), i18n.__('Cancel')],\r\n            defaultId: 0,\r\n            title: i18n.__('Add_Server'),\r\n            message: i18n.__('Add_host_to_servers', host)\r\n        }, (response) => {\r\n            if (response === 0) {\r\n                this.validateHost(host)\r\n                    .then(() => this.addHost(host))\r\n                    .then(() => this.setActive(host))\r\n                    .catch(() => remote.dialog.showErrorBox(i18n.__('Invalid_Host'), i18n.__('Host_not_validated', host)));\r\n            }\r\n        });\r\n    }\r\n\r\n    resetAppData () {\r\n        return remote.dialog.showMessageBox({\r\n            type: 'question',\r\n            buttons: ['Yes', 'Cancel'],\r\n            defaultId: 1,\r\n            title: i18n.__('Reset_App_Data'),\r\n            message: i18n.__('Reset_App_Data_Message')\r\n        }, (response) => {\r\n            if (response === 0) {\r\n                const dataDir = remote.app.getPath('userData');\r\n                jetpack.remove(dataDir);\r\n                remote.app.relaunch();\r\n                remote.app.quit();\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport default new Servers();\r\n","import { EventEmitter } from 'events';\r\nimport servers from './servers';\r\nimport sidebar from './sidebar';\r\nimport { desktopCapturer, ipcRenderer } from 'electron';\r\n\r\nclass WebView extends EventEmitter {\r\n    constructor () {\r\n        super();\r\n\r\n        this.webviewParentElement = document.body;\r\n\r\n        servers.forEach((host) => {\r\n            this.add(host);\r\n        });\r\n\r\n        servers.on('host-added', (hostUrl) => {\r\n            this.add(servers.get(hostUrl));\r\n        });\r\n\r\n        servers.on('host-removed', (hostUrl) => {\r\n            this.remove(hostUrl);\r\n        });\r\n\r\n        servers.on('active-setted', (hostUrl) => {\r\n            this.setActive(hostUrl);\r\n        });\r\n\r\n        servers.on('active-cleared', (hostUrl) => {\r\n            this.deactiveAll(hostUrl);\r\n        });\r\n\r\n        servers.once('loaded', () => {\r\n            this.loaded();\r\n        });\r\n\r\n        ipcRenderer.on('screenshare-result', (e, result) => {\r\n            const webviewObj = this.getActive();\r\n            webviewObj.executeJavaScript(`\r\n                window.parent.postMessage({\r\n                    sourceId: '${result}'\r\n                }, '*')\r\n            `);\r\n        });\r\n    }\r\n\r\n    loaded () {\r\n        document.querySelector('#loading').style.display = 'none';\r\n        document.querySelector('#login-card').style.display = 'block';\r\n        document.querySelector('footer').style.display = 'block';\r\n    }\r\n\r\n    loading () {\r\n        document.querySelector('#loading').style.display = 'block';\r\n        document.querySelector('#login-card').style.display = 'none';\r\n        document.querySelector('footer').style.display = 'none';\r\n    }\r\n\r\n    add (host) {\r\n        let webviewObj = this.getByUrl(host.url);\r\n        if (webviewObj) {\r\n            return;\r\n        }\r\n\r\n        webviewObj = document.createElement('webview');\r\n        webviewObj.setAttribute('server', host.url);\r\n        webviewObj.setAttribute('preload', './preload.js');\r\n        webviewObj.setAttribute('allowpopups', 'on');\r\n        webviewObj.setAttribute('disablewebsecurity', 'on');\r\n\r\n        webviewObj.addEventListener('did-navigate-in-page', (lastPath) => {\r\n            if ((lastPath.url).includes(host.url)) {\r\n                this.saveLastPath(host.url, lastPath.url);\r\n            }\r\n        });\r\n\r\n        webviewObj.addEventListener('console-message', (e) => {\r\n            console.log('webview:', e.message);\r\n        });\r\n\r\n        webviewObj.addEventListener('ipc-message', (event) => {\r\n            this.emit('ipc-message-'+event.channel, host.url, event.args);\r\n\r\n            switch (event.channel) {\r\n                case 'title-changed':\r\n                    servers.setHostTitle(host.url, event.args[0]);\r\n                    break;\r\n                case 'unread-changed':\r\n                    sidebar.setBadge(host.url, event.args[0]);\r\n                    break;\r\n                case 'focus':\r\n                    servers.setActive(host.url);\r\n                    break;\r\n                case 'get-sourceId':\r\n                    desktopCapturer.getSources({types: ['window', 'screen']}, (error, sources) => {\r\n                        if (error) {\r\n                            throw error;\r\n                        }\r\n\r\n                        sources = sources.map(source => {\r\n                            source.thumbnail = source.thumbnail.toDataURL();\r\n                            return source;\r\n                        });\r\n                        ipcRenderer.send('screenshare', sources);\r\n                    });\r\n                    break;\r\n                case 'reload-server':\r\n                    const active = this.getActive();\r\n                    const server = active.getAttribute('server');\r\n                    this.loading();\r\n                    active.loadURL(server);\r\n                    break;\r\n                case 'sidebar-background':\r\n                    sidebar.changeSidebarColor(event.args[0]);\r\n                    break;\r\n            }\r\n        });\r\n\r\n        webviewObj.addEventListener('dom-ready', () => {\r\n            this.emit('dom-ready', host.url);\r\n        });\r\n\r\n        webviewObj.addEventListener('did-fail-load', (e) => {\r\n            if (e.isMainFrame) {\r\n                webviewObj.loadURL('file://' + __dirname + '/loading-error.html');\r\n            }\r\n        });\r\n\r\n        webviewObj.addEventListener('did-get-response-details', (e) => {\r\n            if (e.resourceType === 'mainFrame' && e.httpResponseCode >= 500) {\r\n                webviewObj.loadURL('file://' + __dirname + '/loading-error.html');\r\n            }\r\n        });\r\n\r\n        this.webviewParentElement.appendChild(webviewObj);\r\n\r\n        webviewObj.src = host.lastPath || host.url;\r\n    }\r\n\r\n    remove (hostUrl) {\r\n        const el = this.getByUrl(hostUrl);\r\n        if (el) {\r\n            el.remove();\r\n        }\r\n    }\r\n\r\n    saveLastPath (hostUrl, lastPathUrl) {\r\n        const hosts = servers.hosts;\r\n        hosts[hostUrl].lastPath = lastPathUrl;\r\n        servers.hosts = hosts;\r\n    }\r\n\r\n    getByUrl (hostUrl) {\r\n        return this.webviewParentElement.querySelector(`webview[server=\"${hostUrl}\"]`);\r\n    }\r\n\r\n    getActive () {\r\n        return document.querySelector('webview.active');\r\n    }\r\n\r\n    isActive (hostUrl) {\r\n        return !!this.webviewParentElement.querySelector(`webview.active[server=\"${hostUrl}\"]`);\r\n    }\r\n\r\n    deactiveAll () {\r\n        let item;\r\n        while (!(item = this.getActive()) === false) {\r\n            item.classList.remove('active');\r\n        }\r\n        document.querySelector('.landing-page').classList.add('hide');\r\n    }\r\n\r\n    showLanding () {\r\n        this.loaded();\r\n        document.querySelector('.landing-page').classList.remove('hide');\r\n    }\r\n\r\n    setActive (hostUrl) {\r\n        if (this.isActive(hostUrl)) {\r\n            return;\r\n        }\r\n\r\n        this.deactiveAll();\r\n        const item = this.getByUrl(hostUrl);\r\n        if (item) {\r\n            item.classList.add('active');\r\n        }\r\n        this.focusActive();\r\n    }\r\n\r\n    focusActive () {\r\n        const active = this.getActive();\r\n        if (active) {\r\n            active.focus();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    goBack () {\r\n        this.getActive().goBack();\r\n    }\r\n\r\n    goForward () {\r\n        this.getActive().goForward();\r\n    }\r\n}\r\n\r\nexport default new WebView();\r\n","import { remote } from 'electron';\r\nimport i18n from '../../i18n/index.js';\r\n\r\nconst APP_NAME = remote.app.getName();\r\nconst isMac = process.platform === 'darwin';\r\n\r\nconst appTemplate = [\r\n    {\r\n        label: i18n.__('About', APP_NAME),\r\n        click: function () {\r\n            const win = new remote.BrowserWindow({\r\n                width: 310,\r\n                height: 240,\r\n                resizable: false,\r\n                show: false,\r\n                center: true,\r\n                maximizable: false,\r\n                minimizable: false,\r\n                title: 'Teamware'\r\n            });\r\n            win.loadURL('file://' + __dirname + '/about.html');\r\n            win.setMenuBarVisibility(false);\r\n            win.show();\r\n        }\r\n    },\r\n    {\r\n        type: 'separator',\r\n        id: 'about-sep'\r\n    },\r\n    {\r\n        label: i18n.__('Quit_App', APP_NAME),\r\n        accelerator: 'CommandOrControl+Q',\r\n        click: function () {\r\n            remote.app.quit();\r\n        }\r\n    }\r\n];\r\n\r\nif (isMac) {\r\n    const macAppExtraTemplate = [\r\n        {\r\n            type: 'separator'\r\n        }\r\n    ];\r\n    appTemplate.push(...macAppExtraTemplate);\r\n}\r\n\r\nexport default appTemplate;\r\n","import i18n from '../../i18n/index.js';\r\n\r\nconst editTemplate = [\r\n    {\r\n        label: i18n.__('Undo'),\r\n        accelerator: 'CommandOrControl+Z',\r\n        role: 'undo'\r\n    },\r\n    {\r\n        label: i18n.__('Redo'),\r\n        accelerator: 'CommandOrControl+Shift+Z',\r\n        role: 'redo'\r\n    },\r\n    {\r\n        type: 'separator'\r\n    },\r\n    {\r\n        label: i18n.__('Cut'),\r\n        accelerator: 'CommandOrControl+X',\r\n        role: 'cut'\r\n    },\r\n    {\r\n        label: i18n.__('Copy'),\r\n        accelerator: 'CommandOrControl+C',\r\n        role: 'copy'\r\n    },\r\n    {\r\n        label: i18n.__('Paste'),\r\n        accelerator: 'CommandOrControl+V',\r\n        role: 'paste'\r\n    },\r\n    {\r\n        label: i18n.__('Select_All'),\r\n        accelerator: 'CommandOrControl+A',\r\n        role: 'selectall'\r\n    }\r\n];\r\n\r\nexport default editTemplate;\r\n","'use strict';\r\n\r\nimport { remote } from 'electron';\r\nimport path from 'path';\r\nimport i18n from '../i18n/index.js';\r\n\r\nconst { Tray, Menu } = remote;\r\n\r\nconst mainWindow = remote.getCurrentWindow();\r\n\r\nconst icons = {\r\n    win32: {\r\n        dir: 'windows'\r\n    },\r\n\r\n    linux: {\r\n        dir: 'linux'\r\n    },\r\n\r\n    darwin: {\r\n        dir: 'osx',\r\n        icon: 'icon-trayTemplate.png'\r\n    }\r\n};\r\n\r\nconst _iconTray = path.join(__dirname, 'images', icons[process.platform].dir, icons[process.platform].icon || 'icon-tray.png');\r\nconst _iconTrayAlert = path.join(__dirname, 'images', icons[process.platform].dir, icons[process.platform].iconAlert || 'icon-tray-alert.png');\r\n\r\nfunction createAppTray () {\r\n    const _tray = new Tray(_iconTray);\r\n    mainWindow.tray = _tray;\r\n\r\n    const contextMenuShow = Menu.buildFromTemplate([{\r\n        label: i18n.__('Show'),\r\n        click () {\r\n            mainWindow.show();\r\n        }\r\n    }, {\r\n        label: i18n.__('Quit'),\r\n        click () {\r\n            remote.app.quit();\r\n        }\r\n    }]);\r\n\r\n    const contextMenuHide = Menu.buildFromTemplate([{\r\n        label: i18n.__('Hide'),\r\n        click () {\r\n            mainWindow.hide();\r\n        }\r\n    }, {\r\n        label: i18n.__('Quit'),\r\n        click () {\r\n            remote.app.quit();\r\n        }\r\n    }]);\r\n\r\n    if (!mainWindow.isMinimized() && !mainWindow.isVisible()) {\r\n        _tray.setContextMenu(contextMenuShow);\r\n    } else {\r\n        _tray.setContextMenu(contextMenuHide);\r\n    }\r\n\r\n    const onShow = function () {\r\n        _tray.setContextMenu(contextMenuHide);\r\n    };\r\n\r\n    const onHide = function () {\r\n        _tray.setContextMenu(contextMenuShow);\r\n    };\r\n\r\n    mainWindow.on('show', onShow);\r\n    mainWindow.on('restore', onShow);\r\n\r\n    mainWindow.on('hide', onHide);\r\n    mainWindow.on('minimize', onHide);\r\n\r\n    _tray.setToolTip(remote.app.getName());\r\n\r\n    _tray.on('right-click', function (e, b) {\r\n        _tray.popUpContextMenu(undefined, b);\r\n    });\r\n\r\n    _tray.on('click', () => {\r\n        if (mainWindow.isVisible()) {\r\n            return mainWindow.hide();\r\n        }\r\n\r\n        mainWindow.show();\r\n    });\r\n\r\n    mainWindow.destroyTray = function () {\r\n        mainWindow.removeListener('show', onShow);\r\n        mainWindow.removeListener('hide', onHide);\r\n        _tray.destroy();\r\n    };\r\n}\r\n\r\nfunction setImage (title) {\r\n    if (title === '•') {\r\n        title = \"Dot\";\r\n    } else if (!isNaN(parseInt(title)) && title > 9) {\r\n        title = \"9Plus\";\r\n    }\r\n\r\n    const _iconPath = path.join(__dirname, 'images', icons[process.platform].dir, `icon-tray${title}.png`);\r\n    mainWindow.tray.setImage(_iconPath);\r\n}\r\n\r\nfunction showTrayAlert (showAlert, title) {\r\n    if (mainWindow.tray === null || mainWindow.tray === undefined) {\r\n        return;\r\n    }\r\n\r\n    mainWindow.flashFrame(showAlert);\r\n    if (process.platform !== 'darwin') {\r\n        setImage(title);\r\n    } else {\r\n        if (showAlert) {\r\n            mainWindow.tray.setImage(_iconTrayAlert);\r\n        } else {\r\n            mainWindow.tray.setImage(_iconTray);\r\n        }\r\n        mainWindow.tray.setTitle(title);\r\n    }\r\n\r\n}\r\n\r\nfunction removeAppTray () {\r\n    mainWindow.destroyTray();\r\n}\r\n\r\nfunction toggle () {\r\n    if (localStorage.getItem('hideTray') === 'true') {\r\n        createAppTray();\r\n        localStorage.setItem('hideTray', 'false');\r\n    } else {\r\n        removeAppTray();\r\n        localStorage.setItem('hideTray', 'true');\r\n    }\r\n}\r\n\r\nif (localStorage.getItem('hideTray') !== 'true') {\r\n    createAppTray();\r\n}\r\n\r\nexport default {\r\n    showTrayAlert,\r\n    toggle\r\n};\r\n","import { remote } from 'electron';\r\nimport i18n from '../../i18n/index.js';\r\nimport webview from '../webview';\r\nimport sidebar from '../sidebar';\r\nimport tray from '../tray';\r\n\r\nconst isMac = process.platform === 'darwin';\r\nconst certificate = remote.require('./background').certificate;\r\n\r\nconst viewTemplate = [\r\n    {\r\n        label: i18n.__('Original_Zoom'),\r\n        accelerator: 'CommandOrControl+0',\r\n        role: 'resetzoom'\r\n    },\r\n    {\r\n        label: i18n.__('Zoom_In'),\r\n        accelerator: 'CommandOrControl+Plus',\r\n        role: 'zoomin'\r\n    },\r\n    {\r\n        label: i18n.__('Zoom_Out'),\r\n        accelerator: 'CommandOrControl+-',\r\n        role: 'zoomout'\r\n    },\r\n    {\r\n        type: 'separator'\r\n    },\r\n    {\r\n        label: i18n.__('Current_Server_Reload'),\r\n        accelerator: 'CommandOrControl+R',\r\n        click: function () {\r\n            const activeWebview = webview.getActive();\r\n            if (activeWebview) {\r\n                activeWebview.reload();\r\n            }\r\n        }\r\n    },\r\n    {\r\n        label: i18n.__('Current_Server_Toggle_DevTools'),\r\n        accelerator: isMac ? 'Command+Alt+I' : 'Ctrl+Shift+I',\r\n        click: function () {\r\n            const activeWebview = webview.getActive();\r\n            if (activeWebview) {\r\n                activeWebview.openDevTools();\r\n            }\r\n        }\r\n    },\r\n    {\r\n        type: 'separator'\r\n    },\r\n    {\r\n        label: i18n.__('Application_Reload'),\r\n        accelerator: 'CommandOrControl+Shift+R',\r\n        click: function () {\r\n            const mainWindow = remote.getCurrentWindow();\r\n            if (mainWindow.destroyTray) {\r\n                mainWindow.destroyTray();\r\n            }\r\n            mainWindow.reload();\r\n        }\r\n    },\r\n    {\r\n        label: i18n.__('Application_Toggle_DevTools'),\r\n        click: function () {\r\n            remote.getCurrentWindow().toggleDevTools();\r\n        }\r\n    },\r\n    {\r\n        type: 'separator',\r\n        id: 'toggle'\r\n    },\r\n    {\r\n        label: i18n.__('Toggle_Server_List'),\r\n        click: function () {\r\n            sidebar.toggle();\r\n        }\r\n    },\r\n    {\r\n        type: 'separator'\r\n    },\r\n    {\r\n        label: i18n.__('Clear'),\r\n        submenu: [\r\n            {\r\n                label: i18n.__('Clear_Trusted_Certificates'),\r\n                click: function () {\r\n                    certificate.clear();\r\n                }\r\n            }\r\n        ]\r\n    }\r\n];\r\n\r\nif (isMac) {\r\n    viewTemplate.push({\r\n        label: i18n.__('Toggle_Tray_Icon'),\r\n        click: function () {\r\n            tray.toggle();\r\n        },\r\n        position: 'after=toggle'\r\n    });\r\n} else {\r\n    viewTemplate.push({\r\n        label: i18n.__('Toggle_Menu_Bar'),\r\n        click: function () {\r\n            const current = localStorage.getItem('autohideMenu') === 'true';\r\n            remote.getCurrentWindow().setAutoHideMenuBar(!current);\r\n            localStorage.setItem('autohideMenu', JSON.stringify(!current));\r\n        },\r\n        position: 'after=toggle'\r\n    });\r\n}\r\n\r\nexport default viewTemplate;\r\n","import webview from '../webview';\r\nimport i18n from '../../i18n/index.js';\r\n\r\nconst isMac = process.platform === 'darwin';\r\n\r\nconst macWindowTemplate = [\r\n    {\r\n        label: i18n.__('Back'),\r\n        accelerator: 'Command+left',\r\n        click: () => { webview.goBack(); }\r\n    },\r\n    {\r\n        label: i18n.__('Forward'),\r\n        accelerator: 'Command+right',\r\n        click: () => { webview.goForward(); }\r\n    }\r\n];\r\n\r\nconst windowTemplate = [\r\n    {\r\n        label: i18n.__('Back'),\r\n        accelerator: 'Alt+Left',\r\n        click: () => { webview.goBack(); }\r\n    },\r\n    {\r\n        label: i18n.__('Forward'),\r\n        accelerator: 'Alt+Right',\r\n        click: () => { webview.goForward(); }\r\n    },\r\n];\r\n\r\nexport default isMac ? macWindowTemplate : windowTemplate;\r\n","import { remote } from 'electron';\r\nimport i18n from '../../i18n/index.js';\r\nimport webview from '../webview';\r\nimport servers from '../servers';\r\nconst isMac = process.platform === 'darwin';\r\n\r\nconst macWindowTemplate = [\r\n    {\r\n        label: i18n.__('Minimize'),\r\n        accelerator: 'Command+M',\r\n        role: 'minimize'\r\n    },\r\n    {\r\n        label: i18n.__('Close'),\r\n        accelerator: 'Command+W',\r\n        role: 'close'\r\n    },\r\n    {\r\n        type: 'separator'\r\n    },\r\n    {\r\n        type: 'separator',\r\n        id: 'server-list-separator',\r\n        visible: false\r\n    },\r\n    {\r\n        label: i18n.__('Add_new_server'),\r\n        accelerator: 'Command+N',\r\n        click: function () {\r\n            const mainWindow = remote.getCurrentWindow();\r\n            mainWindow.show();\r\n            servers.clearActive();\r\n            webview.showLanding();\r\n        }\r\n    }\r\n];\r\n\r\nconst windowTemplate = [\r\n    {\r\n        type: 'separator',\r\n        id: 'server-list-separator',\r\n        visible: false\r\n    },\r\n    {\r\n        label: i18n.__('Add_new_server'),\r\n        accelerator: 'Ctrl+N',\r\n        click: function () {\r\n            servers.clearActive();\r\n            webview.showLanding();\r\n        }\r\n    },\r\n    {\r\n        type: 'separator'\r\n    },\r\n    {\r\n        label: i18n.__('Close'),\r\n        accelerator: 'Ctrl+W',\r\n        click: function () {\r\n            remote.getCurrentWindow().close();\r\n        }\r\n    }\r\n];\r\n\r\nexport default isMac ? macWindowTemplate : windowTemplate;\r\n","import { remote } from 'electron';\r\nimport servers from '../servers';\r\nimport i18n from '../../i18n/index.js';\r\nconst APP_NAME = remote.app.getName();\r\n\r\nconst helpTemplate = [\r\n    {\r\n        label: i18n.__('Help_Name', APP_NAME),\r\n        click: () => remote.shell.openExternal('https://rocket.chat/docs')\r\n    },\r\n    {\r\n        type: 'separator'\r\n    },\r\n    {\r\n        label: i18n.__('Report_Issue'),\r\n        click: () => remote.shell.openExternal('https://github.com/RocketChat/Rocket.Chat/issues')\r\n    },\r\n    {\r\n        label: i18n.__('Reset_App_Data'),\r\n        click: () => servers.resetAppData()\r\n    },\r\n    {\r\n        type: 'separator'\r\n    },\r\n    {\r\n        label: i18n.__('Learn_More'),\r\n        click: () => remote.shell.openExternal('https://rocket.chat')\r\n    }\r\n];\r\n\r\nexport default helpTemplate;\r\n","'use strict';\r\n\r\nimport { remote } from 'electron';\r\nimport i18n from '../i18n/index.js';\r\nimport servers from './servers';\r\nimport appMenu from './menus/app';\r\nimport editMenu from './menus/edit';\r\nimport viewMenu from './menus/view';\r\nimport historyMenu from './menus/history';\r\nimport windowMenu from './menus/window';\r\nimport helpMenu from './menus/help';\r\n\r\nconst Menu = remote.Menu;\r\nconst APP_NAME = remote.app.getName();\r\nconst isMac = process.platform === 'darwin';\r\n\r\ndocument.title = APP_NAME;\r\n\r\nconst menuTemplate = [\r\n    {\r\n        label: APP_NAME,\r\n        submenu: appMenu\r\n    },\r\n    {\r\n        label: i18n.__('Edit'),\r\n        submenu: editMenu\r\n    },\r\n    {\r\n        label: i18n.__('View'),\r\n        submenu: viewMenu\r\n    },\r\n    {\r\n        label: i18n.__('History'),\r\n        submenu: historyMenu\r\n    },\r\n    {\r\n        label: i18n.__('Window'),\r\n        id: 'window',\r\n        role: 'window',\r\n        submenu: windowMenu\r\n    },\r\n    {\r\n        label: i18n.__('Help'),\r\n        role: 'help',\r\n        submenu: helpMenu\r\n    }\r\n];\r\n\r\nfunction createMenu () {\r\n    const menu = Menu.buildFromTemplate(menuTemplate);\r\n    Menu.setApplicationMenu(menu);\r\n}\r\n\r\nfunction addServer (host, position) {\r\n    const index = windowMenu.findIndex((i) => i.id === 'server-list-separator');\r\n    windowMenu[index].visible = true;\r\n\r\n    const menuItem = {\r\n        label: host.title,\r\n        accelerator: `CmdOrCtrl+ ${position}`,\r\n        position: 'before=server-list-separator',\r\n        id: host.url,\r\n        click: () => {\r\n            const mainWindow = remote.getCurrentWindow();\r\n            mainWindow.show();\r\n            servers.setActive(host.url);\r\n        }\r\n    };\r\n\r\n    windowMenu.push(menuItem);\r\n\r\n    createMenu();\r\n}\r\n\r\nfunction removeServer (server) {\r\n    const index = windowMenu.findIndex((i) => i.id === server);\r\n    windowMenu.splice(index, 1);\r\n    createMenu();\r\n}\r\n\r\nfunction autoHideMenu () {\r\n    remote.getCurrentWindow().setAutoHideMenuBar(true);\r\n}\r\n\r\nif (!isMac && localStorage.getItem('autohideMenu') === 'true') {\r\n    autoHideMenu();\r\n}\r\n\r\ncreateMenu();\r\n\r\nexport {\r\n    addServer,\r\n    removeServer\r\n};\r\n","import { EventEmitter } from 'events';\r\nimport { remote } from 'electron';\r\nimport i18n from '../i18n/index.js';\r\nimport servers from './servers';\r\nimport webview from './webview';\r\nimport * as menus from './menus';\r\n\r\nclass SideBar extends EventEmitter {\r\n    constructor () {\r\n        super();\r\n\r\n        this.sortOrder = JSON.parse(localStorage.getItem(this.sortOrderKey)) || [];\r\n        localStorage.setItem(this.sortOrderKey, JSON.stringify(this.sortOrder));\r\n\r\n        this.listElement = document.getElementById('serverList');\r\n\r\n        Object.values(servers.hosts)\r\n            .sort((a, b) => this.sortOrder.indexOf(a.url) - this.sortOrder.indexOf(b.url))\r\n            .forEach((host) => {\r\n                this.add(host);\r\n            });\r\n\r\n        servers.on('host-added', (hostUrl) => {\r\n            this.add(servers.get(hostUrl));\r\n        });\r\n\r\n        servers.on('host-removed', (hostUrl) => {\r\n            this.remove(hostUrl);\r\n        });\r\n\r\n        servers.on('active-setted', (hostUrl) => {\r\n            this.setActive(hostUrl);\r\n        });\r\n\r\n        servers.on('active-cleared', (hostUrl) => {\r\n            this.deactiveAll(hostUrl);\r\n        });\r\n\r\n        servers.on('title-setted', (hostUrl, title) => {\r\n            this.setLabel(hostUrl, title);\r\n        });\r\n\r\n        webview.on('dom-ready', (hostUrl) => {\r\n            this.setActive(localStorage.getItem(servers.activeKey));\r\n            webview.getActive().send('request-sidebar-color');\r\n            this.setImage(hostUrl);\r\n            if (this.isHidden()) {\r\n                this.hide();\r\n            } else {\r\n                this.show();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    get sortOrderKey () {\r\n        return 'rocket.chat.sortOrder';\r\n    }\r\n\r\n    add (host) {\r\n        let name = host.title.replace(/^https?:\\/\\/(?:www\\.)?([^\\/]+)(.*)/, '$1');\r\n        name = name.split('.');\r\n        name = name[0][0] + (name[1] ? name[1][0] : '');\r\n        name = name.toUpperCase();\r\n\r\n        const initials = document.createElement('span');\r\n        initials.innerHTML = name;\r\n\r\n        const tooltip = document.createElement('div');\r\n        tooltip.classList.add('tooltip');\r\n        tooltip.innerHTML = host.title;\r\n\r\n        const badge = document.createElement('div');\r\n        badge.classList.add('badge');\r\n\r\n        const img = document.createElement('img');\r\n        img.onload = function () {\r\n            img.style.display = 'initial';\r\n            initials.style.display = 'none';\r\n        };\r\n\r\n        let hostOrder = 0;\r\n        if (this.sortOrder.includes(host.url)) {\r\n            hostOrder = this.sortOrder.indexOf(host.url) + 1;\r\n        } else {\r\n            hostOrder = this.sortOrder.length + 1;\r\n            this.sortOrder.push(host.url);\r\n        }\r\n\r\n        const hotkey = document.createElement('div');\r\n        hotkey.classList.add('name');\r\n        if (process.platform === 'darwin') {\r\n            hotkey.innerHTML = `⌘${hostOrder}`;\r\n        } else {\r\n            hotkey.innerHTML = `^${hostOrder}`;\r\n        }\r\n\r\n        const item = document.createElement('li');\r\n        item.appendChild(initials);\r\n        item.appendChild(tooltip);\r\n        item.appendChild(badge);\r\n        item.appendChild(img);\r\n        item.appendChild(hotkey);\r\n\r\n        item.dataset.host = host.url;\r\n        item.dataset.sortOrder = hostOrder;\r\n        item.setAttribute('server', host.url);\r\n        item.classList.add('instance');\r\n\r\n        item.setAttribute('draggable', true);\r\n\r\n        item.ondragstart = (event) => {\r\n            window.dragged = event.target.nodeName !== 'LI' ? event.target.closest('li') : event.target;\r\n            event.dataTransfer.effectAllowed = 'move';\r\n            event.dataTransfer.dropEffect = 'move';\r\n            event.target.style.opacity = .5;\r\n        };\r\n\r\n        item.ondragover = (event) => {\r\n            event.preventDefault();\r\n        };\r\n\r\n        item.ondragenter = (event) => {\r\n            if (this.isBefore(window.dragged, event.target)) {\r\n                event.currentTarget.parentNode.insertBefore(window.dragged, event.currentTarget);\r\n            } else if (event.currentTarget !== event.currentTarget.parentNode.lastChild) {\r\n                event.currentTarget.parentNode.insertBefore(window.dragged, event.currentTarget.nextSibling);\r\n            } else {\r\n                event.currentTarget.parentNode.appendChild(window.dragged);\r\n            }\r\n        };\r\n\r\n        item.ondragend = (event) => {\r\n            event.target.style.opacity = '';\r\n        };\r\n\r\n        item.ondrop = (event) => {\r\n            event.preventDefault();\r\n\r\n            const newSortOrder = [];\r\n            Array.from(event.currentTarget.parentNode.children)\r\n                .map((sideBarElement) => {\r\n                    const url = sideBarElement.dataset.host;\r\n                    newSortOrder.push(url);\r\n                    this.remove(url);\r\n\r\n                    return sideBarElement;\r\n                })\r\n                .map((sideBarElement) => {\r\n                    this.sortOrder = newSortOrder;\r\n                    localStorage.setItem(this.sortOrderKey, JSON.stringify(this.sortOrder));\r\n\r\n                    const url = sideBarElement.dataset.host;\r\n                    const host = { url, title: sideBarElement.querySelector('div.tooltip').innerHTML };\r\n                    this.add(host);\r\n                    this.setImage(url);\r\n                });\r\n\r\n            this.setActive(window.dragged.dataset.host);\r\n        };\r\n\r\n        item.onclick = () => {\r\n            servers.setActive(host.url);\r\n        };\r\n\r\n        this.listElement.appendChild(item);\r\n        menus.addServer(host, hostOrder);\r\n    }\r\n\r\n    setImage (hostUrl) {\r\n        const img = this.getByUrl(hostUrl).querySelector('img');\r\n        img.src = `${hostUrl}/assets/favicon.svg?v=${Math.round(Math.random()*10000)}`;\r\n    }\r\n\r\n    remove (hostUrl) {\r\n        const el = this.getByUrl(hostUrl);\r\n        if (el) {\r\n            el.remove();\r\n            menus.removeServer(hostUrl);\r\n        }\r\n    }\r\n\r\n    getByUrl (hostUrl) {\r\n        return this.listElement.querySelector(`.instance[server=\"${hostUrl}\"]`);\r\n    }\r\n\r\n    getActive () {\r\n        return this.listElement.querySelector('.instance.active');\r\n    }\r\n\r\n    isActive (hostUrl) {\r\n        return !!this.listElement.querySelector(`.instance.active[server=\"${hostUrl}\"]`);\r\n    }\r\n\r\n    changeSidebarColor ({color, background}) {\r\n        const sidebar = document.querySelector('.server-list');\r\n        if (sidebar) {\r\n            sidebar.style.background = background;\r\n            sidebar.style.color = color;\r\n        }\r\n    }\r\n\r\n    setActive (hostUrl) {\r\n        if (this.isActive(hostUrl)) {\r\n            return;\r\n        }\r\n\r\n        this.deactiveAll();\r\n        const item = this.getByUrl(hostUrl);\r\n        if (item) {\r\n            item.classList.add('active');\r\n        }\r\n        webview.getActive().send && webview.getActive().send('request-sidebar-color');\r\n    }\r\n\r\n    deactiveAll () {\r\n        let item;\r\n        while (!(item = this.getActive()) === false) {\r\n            item.classList.remove('active');\r\n        }\r\n    }\r\n\r\n    setLabel (hostUrl, label) {\r\n        this.listElement.querySelector(`.instance[server=\"${hostUrl}\"] .tooltip`).innerHTML = label;\r\n    }\r\n\r\n    setBadge (hostUrl, badge) {\r\n        const item = this.getByUrl(hostUrl);\r\n        const badgeEl = item.querySelector('.badge');\r\n\r\n        if (badge !== null && badge !== undefined && badge !== '') {\r\n            item.classList.add('unread');\r\n            if (isNaN(parseInt(badge))) {\r\n                badgeEl.innerHTML = '';\r\n            } else {\r\n                badgeEl.innerHTML = badge;\r\n            }\r\n        } else {\r\n            badge = undefined;\r\n            item.classList.remove('unread');\r\n            badgeEl.innerHTML = '';\r\n        }\r\n        this.emit('badge-setted', hostUrl, badge);\r\n    }\r\n\r\n    getGlobalBadge () {\r\n        let count = 0;\r\n        let alert = '';\r\n        const instanceEls = this.listElement.querySelectorAll('li.instance');\r\n        for (let i = instanceEls.length - 1; i >= 0; i--) {\r\n            const instanceEl = instanceEls[i];\r\n            const text = instanceEl.querySelector('.badge').innerHTML;\r\n            if (!isNaN(parseInt(text))) {\r\n                count += parseInt(text);\r\n            }\r\n\r\n            if (alert === '' && instanceEl.classList.contains('unread') === true) {\r\n                alert = '•';\r\n            }\r\n        }\r\n\r\n        if (count > 0) {\r\n            return String(count);\r\n        } else {\r\n            return alert;\r\n        }\r\n    }\r\n\r\n    hide () {\r\n        document.body.classList.add('hide-server-list');\r\n        localStorage.setItem('sidebar-closed', 'true');\r\n        this.emit('hide');\r\n        if (process.platform === 'darwin') {\r\n            document.querySelectorAll('webview').forEach(\r\n                (webviewObj) => { if (webviewObj.insertCSS) { webviewObj.insertCSS('aside.side-nav{margin-top:15px;overflow:hidden; transition: margin .5s ease-in-out; } .sidebar{padding-top:10px;transition: margin .5s ease-in-out;}'); } });\r\n        }\r\n    }\r\n\r\n    show () {\r\n        document.body.classList.remove('hide-server-list');\r\n        localStorage.setItem('sidebar-closed', 'false');\r\n        this.emit('show');\r\n        if (process.platform === 'darwin') {\r\n            document.querySelectorAll('webview').forEach(\r\n                (webviewObj) => { if (webviewObj.insertCSS) { webviewObj.insertCSS('aside.side-nav{margin-top:0; overflow:hidden; transition: margin .5s ease-in-out;} .sidebar{padding-top:0;transition: margin .5s ease-in-out;}'); } });\r\n        }\r\n    }\r\n\r\n    toggle () {\r\n        if (this.isHidden()) {\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    isHidden () {\r\n        return localStorage.getItem('sidebar-closed') === 'true';\r\n    }\r\n\r\n    isBefore (a, b) {\r\n        if (a.parentNode === b.parentNode) {\r\n            for (let cur = a; cur; cur = cur.previousSibling) {\r\n                if (cur === b) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default new SideBar();\r\n\r\n\r\nlet selectedInstance = null;\r\nconst instanceMenu = remote.Menu.buildFromTemplate([{\r\n    label: i18n.__('Reload_server'),\r\n    click: function () {\r\n        webview.getByUrl(selectedInstance.dataset.host).reload();\r\n    }\r\n}, {\r\n    label: i18n.__('Remove_server'),\r\n    click: function () {\r\n        servers.removeHost(selectedInstance.dataset.host);\r\n    }\r\n}, {\r\n    label: i18n.__('Open_DevTools'),\r\n    click: function () {\r\n        webview.getByUrl(selectedInstance.dataset.host).openDevTools();\r\n    }\r\n}]);\r\n\r\nwindow.addEventListener('contextmenu', function (e) {\r\n    if (e.target.classList.contains('instance') || e.target.parentNode.classList.contains('instance')) {\r\n        e.preventDefault();\r\n        if (e.target.classList.contains('instance')) {\r\n            selectedInstance = e.target;\r\n        } else {\r\n            selectedInstance = e.target.parentNode;\r\n        }\r\n\r\n        instanceMenu.popup(remote.getCurrentWindow());\r\n    }\r\n}, false);\r\n\r\nif (process.platform === 'darwin') {\r\n    window.addEventListener('keydown', function (e) {\r\n        if (e.key === 'Meta') {\r\n            document.getElementsByClassName('server-list')[0].classList.add('command-pressed');\r\n        }\r\n    });\r\n\r\n    window.addEventListener('keyup', function (e) {\r\n        if (e.key === 'Meta') {\r\n            document.getElementsByClassName('server-list')[0].classList.remove('command-pressed');\r\n        }\r\n    });\r\n} else {\r\n    window.addEventListener('keydown', function (e) {\r\n        if (e.key === 'ctrlKey') {\r\n            document.getElementsByClassName('server-list')[0].classList.add('command-pressed');\r\n        }\r\n    });\r\n\r\n    window.addEventListener('keyup', function (e) {\r\n        if (e.key === 'ctrlKey') {\r\n            document.getElementsByClassName('server-list')[0].classList.remove('command-pressed');\r\n        }\r\n    });\r\n}\r\n","/* globals $ */\r\n\r\nimport { remote, ipcRenderer } from 'electron';\r\nimport i18n from '../i18n/index.js';\r\nimport servers from './servers';\r\nimport sidebar from './sidebar';\r\nimport webview from './webview';\r\nimport tray from './tray';\r\nimport './menus';\r\n\r\nsidebar.on('badge-setted', function () {\r\n    const badge = sidebar.getGlobalBadge();\r\n\r\n    if (process.platform === 'darwin') {\r\n        remote.app.dock.setBadge(badge);\r\n    }\r\n    tray.showTrayAlert(!isNaN(parseInt(badge)) && badge > 0, badge);\r\n});\r\n\r\nexport const start = function () {\r\n    const defaultInstance = 'https://cc.nomalis.com';\r\n\r\n    // connection check\r\n    function online () {\r\n        document.body.classList.remove('offline');\r\n    }\r\n\r\n    function offline () {\r\n        document.body.classList.add('offline');\r\n    }\r\n\r\n    if (!navigator.onLine) {\r\n        offline();\r\n    }\r\n    window.addEventListener('online', online);\r\n    window.addEventListener('offline', offline);\r\n    // end connection check\r\n\r\n    const form = document.querySelector('form');\r\n    const hostField = form.querySelector('[name=\"host\"]');\r\n    const button = form.querySelector('[type=\"submit\"]');\r\n    const invalidUrl = form.querySelector('#invalidUrl');\r\n\r\n    window.addEventListener('load', function () {\r\n        hostField.focus();\r\n    });\r\n\r\n    function validateHost () {\r\n        return new Promise(function (resolve, reject) {\r\n            const execValidation = function () {\r\n                invalidUrl.style.display = 'none';\r\n                hostField.classList.remove('wrong');\r\n\r\n                let host = hostField.value.trim();\r\n                host = host.replace(/\\/$/, '');\r\n                hostField.value = host;\r\n\r\n                if (host.length === 0) {\r\n                    button.value = i18n.__('Connect');\r\n                    button.disabled = false;\r\n                    resolve();\r\n                    return;\r\n                }\r\n\r\n                button.value = i18n.__('Validating');\r\n                button.disabled = true;\r\n\r\n                servers.validateHost(host, 2000).then(function () {\r\n                    button.value = i18n.__('Connect');\r\n                    button.disabled = false;\r\n                    resolve();\r\n                }, function (status) {\r\n                    // If the url begins with HTTP, mark as invalid\r\n                    if (/^https?:\\/\\/.+/.test(host) || status === 'basic-auth') {\r\n                        button.value = i18n.__('Invalid_url');\r\n                        invalidUrl.style.display = 'block';\r\n                        switch (status) {\r\n                            case 'basic-auth':\r\n                                invalidUrl.innerHTML = i18n.__('Auth_needed_try', '<b>username:password@host</b>');\r\n                                break;\r\n                            case 'invalid':\r\n                                invalidUrl.innerHTML = i18n.__('No_valid_server_found');\r\n                                break;\r\n                            case 'timeout':\r\n                                invalidUrl.innerHTML = i18n.__('Timeout_trying_to_connect');\r\n                                break;\r\n                        }\r\n                        hostField.classList.add('wrong');\r\n                        reject();\r\n                        return;\r\n                    }\r\n\r\n                    // // If the url begins with HTTPS, fallback to HTTP\r\n                    // if (/^https:\\/\\/.+/.test(host)) {\r\n                    //     hostField.value = host.replace('https://', 'http://');\r\n                    //     return execValidation();\r\n                    // }\r\n\r\n                    // If the url isn't localhost, don't have dots and don't have protocol\r\n                    // try as a .rocket.chat subdomain\r\n                    if (!/(^https?:\\/\\/)|(\\.)|(^([^:]+:[^@]+@)?localhost(:\\d+)?$)/.test(host)) {\r\n                        hostField.value = `https://${host}.cc.nomalis.com`;\r\n                        return execValidation();\r\n                    }\r\n\r\n                    // If the url don't start with protocol try HTTPS\r\n                    if (!/^https?:\\/\\//.test(host)) {\r\n                        hostField.value = `https://${host}`;\r\n                        return execValidation();\r\n                    }\r\n                });\r\n            };\r\n            execValidation();\r\n        });\r\n    }\r\n\r\n    hostField.addEventListener('blur', function () {\r\n        validateHost().then(function () {}, function () {});\r\n    });\r\n\r\n    ipcRenderer.on('certificate-reload', function (event, url) {\r\n        hostField.value = url.replace(/\\/api\\/info$/, '');\r\n        validateHost().then(function () {}, function () {});\r\n    });\r\n\r\n    const submit = function () {\r\n        validateHost().then(function () {\r\n            const input = form.querySelector('[name=\"host\"]');\r\n            let url = input.value;\r\n\r\n            if (url.length === 0) {\r\n                url = defaultInstance;\r\n            }\r\n\r\n            url = servers.addHost(url);\r\n            if (url !== false) {\r\n                sidebar.show();\r\n                servers.setActive(url);\r\n            }\r\n\r\n            input.value = '';\r\n        }, function () {});\r\n    };\r\n\r\n    hostField.addEventListener('keydown', function (ev) {\r\n        if (ev.which === 13) {\r\n            ev.preventDefault();\r\n            ev.stopPropagation();\r\n            submit();\r\n            return false;\r\n        }\r\n    });\r\n\r\n    form.addEventListener('submit', function (ev) {\r\n        ev.preventDefault();\r\n        ev.stopPropagation();\r\n        submit();\r\n        return false;\r\n    });\r\n\r\n    $('.add-server').on('click', function () {\r\n        servers.clearActive();\r\n        webview.showLanding();\r\n    });\r\n\r\n    servers.restoreActive();\r\n};\r\n\r\nwindow.addEventListener('focus', function () {\r\n    webview.focusActive();\r\n});\r\n","import './branding/branding.js';\r\nimport { start } from './scripts/start';\r\nimport { remote } from 'electron';\r\nconst app = remote.app;\r\n\r\nBugsnag.metaData = {\r\n    // platformId: app.process.platform,\r\n    // platformArch: app.process.arch,\r\n    // electronVersion: app.process.versions.electron,\r\n    version: app.getVersion()\r\n    // platformVersion: cordova.platformVersion\r\n    // build: appInfo.build\r\n};\r\n\r\nBugsnag.appVersion = app.getVersion();\r\n\r\napp.setAppUserModelId('chat.rocket');\r\n\r\nwindow.$ = window.jQuery = require('./vendor/jquery-3.1.1');\r\nstart();\r\n"],"names":["app","remote","EventEmitter","ipcRenderer","path","desktopCapturer","APP_NAME","isMac","Menu","macWindowTemplate","windowTemplate","appMenu","editMenu","viewMenu","helpMenu","menus.addServer","menus.removeServer"],"mappings":"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"}